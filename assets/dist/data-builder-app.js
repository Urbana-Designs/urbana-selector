import{$ as Hs,r as L,n as pe,o as W,q as Le,v as Ks,j as e,w as Js,x as Ns,y as Ys,u as je,z as Zs,A as Xs,c as ve,B as be,C as ae,D as Qs,f as De,a as et,E as ws,F as Ps,G as st,J as tt,K as rt,L as at,M as it,g as nt,h as lt,R as A,b as S,I as u,d as z,e as $,i as Y,t as de,s as ye,l as Ne,N as ot,k as Rs,m as ct,H as dt}from"./middleware.js";import{u as Ce,c as B,d as Qe,a as es,b as ss,m as ne,e as Se,f as Fe,g as ke,h as Te,i as Ee}from"./index.js";import{u as ut,f as mt,i as _s,t as Ge,a as q,c as Ds,d as Cs,b as os,g as ee,e as pt,T as ht}from"./chunk-HO5AVL6Z.js";import"./features-animation.js";let Be=new Map,We=!1;try{We=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let we=!1;try{we=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ss={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class xt{format(a){let t="";if(!We&&this.options.signDisplay!=null?t=ft(this.numberFormatter,this.options.signDisplay,a):t=this.numberFormatter.format(a),this.options.style==="unit"&&!we){var r;let{unit:i,unitDisplay:n="short",locale:l}=this.resolvedOptions();if(!i)return t;let c=(r=Ss[i])===null||r===void 0?void 0:r[n];t+=c[l]||c.default}return t}formatToParts(a){return this.numberFormatter.formatToParts(a)}formatRange(a,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(a,t);if(t<a)throw new RangeError("End date must be >= start date");return`${this.format(a)} – ${this.format(t)}`}formatRangeToParts(a,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(a,t);if(t<a)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(a),i=this.numberFormatter.formatToParts(t);return[...r.map(n=>({...n,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(n=>({...n,source:"endRange"}))]}resolvedOptions(){let a=this.numberFormatter.resolvedOptions();return!We&&this.options.signDisplay!=null&&(a={...a,signDisplay:this.options.signDisplay}),!we&&this.options.style==="unit"&&(a={...a,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),a}constructor(a,t={}){this.numberFormatter=gt(a,t),this.options=t}}function gt(s,a={}){let{numberingSystem:t}=a;if(t&&s.includes("-nu-")&&(s.includes("-u-")||(s+="-u-"),s+=`-nu-${t}`),a.style==="unit"&&!we){var r;let{unit:l,unitDisplay:c="short"}=a;if(!l)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ss[l])===null||r===void 0)&&r[c]))throw new Error(`Unsupported unit ${l} with unitDisplay = ${c}`);a={...a,style:"decimal"}}let i=s+(a?Object.entries(a).sort((l,c)=>l[0]<c[0]?-1:1).join():"");if(Be.has(i))return Be.get(i);let n=new Intl.NumberFormat(s,a);return Be.set(i,n),n}function ft(s,a,t){if(a==="auto")return s.format(t);if(a==="never")return s.format(Math.abs(t));{let r=!1;if(a==="always"?r=t>0||Object.is(t,0):a==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):r=t>0),r){let i=s.format(-t),n=s.format(t),l=i.replace(n,"").replace(/\u200e|\u061C/,"");return[...l].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(n,"!!!").replace(l,"+").replace("!!!",n)}else return s.format(t)}}function jt(s={}){let{locale:a}=Hs();return L.useMemo(()=>new xt(a,s),[a,s])}var cs=pe({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden rtl:rotate-180",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient-default bg-stripe-size"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}},{color:"primary",isStriped:!0,class:{indicator:"bg-stripe-gradient-primary bg-stripe-size"}},{color:"secondary",isStriped:!0,class:{indicator:"bg-stripe-gradient-secondary bg-stripe-size"}},{color:"success",isStriped:!0,class:{indicator:"bg-stripe-gradient-success bg-stripe-size"}},{color:"warning",isStriped:!0,class:{indicator:"bg-stripe-gradient-warning bg-stripe-size"}},{color:"danger",isStriped:!0,class:{indicator:"bg-stripe-gradient-danger bg-stripe-size"}}]},{twMerge:!0});pe({slots:{base:"flex flex-col justify-center gap-1 max-w-fit items-center",label:"",svgWrapper:"relative block",svg:"z-0 relative overflow-hidden",track:"h-full stroke-default-300/50",indicator:"h-full stroke-current",value:"absolute font-normal inset-0 flex items-center justify-center"},variants:{color:{default:{svg:"text-default-400"},primary:{svg:"text-primary"},secondary:{svg:"text-secondary"},success:{svg:"text-success"},warning:{svg:"text-warning"},danger:{svg:"text-danger"}},size:{sm:{svg:"w-8 h-8",label:"text-small",value:"text-[0.5rem]"},md:{svg:"w-10 h-10",label:"text-small",value:"text-[0.55rem]"},lg:{svg:"w-12 h-12",label:"text-medium",value:"text-[0.6rem]"}},isIndeterminate:{true:{svg:"animate-spinner-ease-spin"}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-all !duration-500"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{svg:"!transition-none motion-reduce:transition-none"}}]});var ds=pe({base:["px-2","py-1","h-fit","font-mono","font-normal","inline-block","whitespace-nowrap"],variants:{color:{default:W.flat.default,primary:W.flat.primary,secondary:W.flat.secondary,success:W.flat.success,warning:W.flat.warning,danger:W.flat.danger},size:{sm:"text-small",md:"text-medium",lg:"text-large"},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"}},defaultVariants:{color:"default",size:"sm",radius:"sm"}}),vt=pe({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...Ks],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...Le,"flex","items-center","justify-center"],name:[...Le,"font-normal","text-center","text-inherit"],icon:[...Le,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:W.solid.default},primary:{base:W.solid.primary},secondary:{base:W.solid.secondary},success:{base:W.solid.success},warning:{base:W.solid.warning},danger:{base:W.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});pe({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var bt=()=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[e.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[rr,yt]=Js({name:"AvatarGroupContext",strict:!1});function Nt(s={}){var a,t,r,i,n,l,c,m;const v=Ns(),x=yt(),y=!!x,{as:g,ref:_,src:N,name:F,icon:O,classNames:E,fallback:k,alt:T=F||"avatar",imgRef:I,color:G=(a=x==null?void 0:x.color)!=null?a:"default",radius:h=(t=x==null?void 0:x.radius)!=null?t:"full",size:b=(r=x==null?void 0:x.size)!=null?r:"md",isBordered:f=(i=x==null?void 0:x.isBordered)!=null?i:!1,isDisabled:P=(n=x==null?void 0:x.isDisabled)!=null?n:!1,isFocusable:d=!1,getInitials:w=Ys,ignoreFallback:C=!1,showFallback:j=!1,ImgComponent:o="img",imgProps:p,className:D,onError:M,disableAnimation:R,...U}=s,Z=g||"span",Ie=je(_),Me=je(I),{isFocusVisible:$s,isFocused:Ls,focusProps:as}=Zs(),{isHovered:Bs,hoverProps:Us}=Xs({isDisabled:P}),xe=(l=R??(v==null?void 0:v.disableAnimation))!=null?l:!1,is=(m=typeof o=="object"&&((c=o==null?void 0:o.displayName)==null?void 0:c.includes("HeroUI")))!=null?m:!1,ge=ut({src:N,onError:M,ignoreFallback:C,shouldBypassImageLoad:g!==void 0||o!=="img"&&!is})==="loaded",ns=!is,qs=(!N||!ge)&&j,ce=L.useMemo(()=>{var Q;return vt({color:G,radius:h,size:b,isBordered:f,isDisabled:P,isInGroup:y,disableAnimation:xe,isInGridGroup:(Q=x==null?void 0:x.isGrid)!=null?Q:!1})},[G,h,b,f,P,xe,y,x==null?void 0:x.isGrid]),ls=ve(E==null?void 0:E.base,D),$e=L.useMemo(()=>d||g==="button",[d,g]),Vs=L.useCallback((Q={})=>({ref:Ie,tabIndex:$e?0:-1,"data-hover":ae(Bs),"data-focus":ae(Ls),"data-focus-visible":ae($s),className:ce.base({class:ve(ls,Q==null?void 0:Q.className)}),...be(U,Us,$e?as:{})}),[$e,ce,ls,as,U]),Ws=L.useCallback((Q={})=>({ref:Me,src:N,"data-loaded":ae(ge),className:ce.img({class:E==null?void 0:E.img}),...be(p,Q,Qs({disableAnimation:xe},{enabled:ns}))}),[ce,ge,p,xe,N,Me,ns]);return{Component:Z,ImgComponent:o,src:N,alt:T,icon:O,name:F,imgRef:Me,slots:ce,classNames:E,fallback:k,isImgLoaded:ge,showFallback:qs,ignoreFallback:C,getInitials:w,getAvatarProps:Vs,getImageProps:Ws}}var Fs=De((s,a)=>{const{Component:t,ImgComponent:r,src:i,icon:n=e.jsx(bt,{}),alt:l,classNames:c,slots:m,name:v,showFallback:x,fallback:y,getInitials:g,getAvatarProps:_,getImageProps:N}=Nt({...s,ref:a}),F=L.useMemo(()=>!x&&i?null:y?e.jsx("div",{"aria-label":l,className:m.fallback({class:c==null?void 0:c.fallback}),role:"img",children:y}):v?e.jsx("span",{"aria-label":l,className:m.name({class:c==null?void 0:c.name}),role:"img",children:g(v)}):e.jsx("span",{"aria-label":l,className:m.icon({class:c==null?void 0:c.icon}),role:"img",children:n}),[x,i,y,v,c]);return e.jsxs(t,{..._(),children:[i&&e.jsx(r,{...N(),alt:l}),F]})});Fs.displayName="HeroUI.Avatar";var ie=Fs,ks=De((s,a)=>{var t;const{as:r,className:i,children:n,...l}=s,c=r||"div",m=je(a),{slots:v,classNames:x}=et(),y=ve(x==null?void 0:x.header,i);return e.jsx(c,{ref:m,className:(t=v.header)==null?void 0:t.call(v,{class:y}),...l,children:n})});ks.displayName="HeroUI.CardHeader";var K=ks;function wt(s){const[a,t]=ws(s,ds.variantKeys),{as:r,children:i,className:n,...l}=a,c=r||"code",m=L.useMemo(()=>ds({...t,className:n}),[Ps(t),n]);return{Component:c,children:i,getCodeProps:()=>({className:m,...l})}}var Ts=De((s,a)=>{const{Component:t,children:r,getCodeProps:i}=wt({...s});return e.jsx(t,{ref:a,...i(),children:r})});Ts.displayName="HeroUI.Code";var Pt=Ts;function Rt(s){let{value:a=0,minValue:t=0,maxValue:r=100,valueLabel:i,isIndeterminate:n,formatOptions:l={style:"percent"}}=s,c=st(s,{labelable:!0}),{labelProps:m,fieldProps:v}=tt({...s,labelElementType:"span"});a=at(a,t,r);let x=(a-t)/(r-t),y=jt(l);if(!n&&!i){let g=l.style==="percent"?x:a;i=y.format(g)}return{progressBarProps:rt(c,{...v,"aria-valuenow":n?void 0:a,"aria-valuemin":t,"aria-valuemax":r,"aria-valuetext":n?void 0:i,role:"progressbar"}),labelProps:m}}function _t(s){var a,t;const r=Ns(),[i,n]=ws(s,cs.variantKeys),{ref:l,as:c,id:m,className:v,classNames:x,label:y,valueLabel:g,value:_=0,minValue:N=0,maxValue:F=100,showValueLabel:O=!1,formatOptions:E={style:"percent"},...k}=i,T=c||"div",I=je(l),G=ve(x==null?void 0:x.base,v),[,h]=mt({rerender:!0,delay:100}),b=s.isIndeterminate,f=(t=(a=s.disableAnimation)!=null?a:r==null?void 0:r.disableAnimation)!=null?t:!1,{progressBarProps:P,labelProps:d}=Rt({id:m,label:y,value:_,minValue:N,maxValue:F,valueLabel:g,formatOptions:E,isIndeterminate:b,"aria-labelledby":s["aria-labelledby"],"aria-label":s["aria-label"]}),w=L.useMemo(()=>cs({...n,disableAnimation:f}),[Ps(n),f]),C=f?!0:h,j=L.useMemo(()=>b||!C?void 0:it((_-N)/(F-N)*100),[C,b,_,N,F]),o=L.useCallback((D={})=>({ref:I,"data-indeterminate":ae(b),"data-disabled":ae(s.isDisabled),className:w.base({class:G}),...be(P,k,D)}),[I,w,b,s.isDisabled,G,P,k]),p=L.useCallback((D={})=>({className:w.label({class:x==null?void 0:x.label}),...be(d,D)}),[w,x,d]);return{Component:T,domRef:I,slots:w,classNames:x,label:y,percentage:j,showValueLabel:O,getProgressBarProps:o,getLabelProps:p}}var Es=De((s,a)=>{const{Component:t,slots:r,classNames:i,label:n,percentage:l,showValueLabel:c,getProgressBarProps:m,getLabelProps:v}=_t({...s,ref:a}),x=m(),y=n||c;return e.jsxs(t,{...x,children:[y?e.jsxs("div",{className:r.labelWrapper({class:i==null?void 0:i.labelWrapper}),children:[n&&e.jsx("span",{...v(),children:n}),c&&e.jsx("span",{className:r.value({class:i==null?void 0:i.value}),children:x["aria-valuetext"]})]}):null,e.jsx("div",{className:r.track({class:i==null?void 0:i.track}),children:e.jsx("div",{className:r.indicator({class:i==null?void 0:i.indicator}),style:{transform:`translateX(-${100-(l||0)}%)`}})})]})});Es.displayName="HeroUI.Progress";var Dt=Es,Gs=Symbol.for("immer-nothing"),us=Symbol.for("immer-draftable"),V=Symbol.for("immer-state");function J(s,...a){throw new Error(`[Immer] minified error nr: ${s}. Full error at: https://bit.ly/3cXEKWf`)}var le=Object.getPrototypeOf;function oe(s){return!!s&&!!s[V]}function te(s){var a;return s?Os(s)||Array.isArray(s)||!!s[us]||!!((a=s.constructor)!=null&&a[us])||he(s)||ze(s):!1}var Ct=Object.prototype.constructor.toString();function Os(s){if(!s||typeof s!="object")return!1;const a=le(s);if(a===null)return!0;const t=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Ct}function Pe(s,a){Oe(s)===0?Reflect.ownKeys(s).forEach(t=>{a(t,s[t],s)}):s.forEach((t,r)=>a(r,t,s))}function Oe(s){const a=s[V];return a?a.type_:Array.isArray(s)?1:he(s)?2:ze(s)?3:0}function He(s,a){return Oe(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function zs(s,a,t){const r=Oe(s);r===2?s.set(a,t):r===3?s.add(t):s[a]=t}function St(s,a){return s===a?s!==0||1/s===1/a:s!==s&&a!==a}function he(s){return s instanceof Map}function ze(s){return s instanceof Set}function se(s){return s.copy_||s.base_}function Ke(s,a){if(he(s))return new Map(s);if(ze(s))return new Set(s);if(Array.isArray(s))return Array.prototype.slice.call(s);const t=Os(s);if(a===!0||a==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(s);delete r[V];let i=Reflect.ownKeys(r);for(let n=0;n<i.length;n++){const l=i[n],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[l]})}return Object.create(le(s),r)}else{const r=le(s);if(r!==null&&t)return{...s};const i=Object.create(r);return Object.assign(i,s)}}function ts(s,a=!1){return Ae(s)||oe(s)||!te(s)||(Oe(s)>1&&Object.defineProperties(s,{set:{value:fe},add:{value:fe},clear:{value:fe},delete:{value:fe}}),Object.freeze(s),a&&Object.values(s).forEach(t=>ts(t,!0))),s}function fe(){J(2)}function Ae(s){return Object.isFrozen(s)}var Ft={};function re(s){const a=Ft[s];return a||J(0,s),a}var ue;function As(){return ue}function kt(s,a){return{drafts_:[],parent_:s,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ms(s,a){a&&(re("Patches"),s.patches_=[],s.inversePatches_=[],s.patchListener_=a)}function Je(s){Ye(s),s.drafts_.forEach(Tt),s.drafts_=null}function Ye(s){s===ue&&(ue=s.parent_)}function ps(s){return ue=kt(ue,s)}function Tt(s){const a=s[V];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function hs(s,a){a.unfinalizedDrafts_=a.drafts_.length;const t=a.drafts_[0];return s!==void 0&&s!==t?(t[V].modified_&&(Je(a),J(4)),te(s)&&(s=Re(a,s),a.parent_||_e(a,s)),a.patches_&&re("Patches").generateReplacementPatches_(t[V].base_,s,a.patches_,a.inversePatches_)):s=Re(a,t,[]),Je(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),s!==Gs?s:void 0}function Re(s,a,t){if(Ae(a))return a;const r=a[V];if(!r)return Pe(a,(i,n)=>xs(s,r,a,i,n,t)),a;if(r.scope_!==s)return a;if(!r.modified_)return _e(s,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let n=i,l=!1;r.type_===3&&(n=new Set(i),i.clear(),l=!0),Pe(n,(c,m)=>xs(s,r,i,c,m,t,l)),_e(s,i,!1),t&&s.patches_&&re("Patches").generatePatches_(r,t,s.patches_,s.inversePatches_)}return r.copy_}function xs(s,a,t,r,i,n,l){if(oe(i)){const c=n&&a&&a.type_!==3&&!He(a.assigned_,r)?n.concat(r):void 0,m=Re(s,i,c);if(zs(t,r,m),oe(m))s.canAutoFreeze_=!1;else return}else l&&t.add(i);if(te(i)&&!Ae(i)){if(!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1)return;Re(s,i),(!a||!a.scope_.parent_)&&typeof r!="symbol"&&(he(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&_e(s,i)}}function _e(s,a,t=!1){!s.parent_&&s.immer_.autoFreeze_&&s.canAutoFreeze_&&ts(a,t)}function Et(s,a){const t=Array.isArray(s),r={type_:t?1:0,scope_:a?a.scope_:As(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:s,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,n=rs;t&&(i=[r],n=me);const{revoke:l,proxy:c}=Proxy.revocable(i,n);return r.draft_=c,r.revoke_=l,c}var rs={get(s,a){if(a===V)return s;const t=se(s);if(!He(t,a))return Gt(s,t,a);const r=t[a];return s.finalized_||!te(r)?r:r===Ue(s.base_,a)?(qe(s),s.copy_[a]=Xe(r,s)):r},has(s,a){return a in se(s)},ownKeys(s){return Reflect.ownKeys(se(s))},set(s,a,t){const r=Is(se(s),a);if(r!=null&&r.set)return r.set.call(s.draft_,t),!0;if(!s.modified_){const i=Ue(se(s),a),n=i==null?void 0:i[V];if(n&&n.base_===t)return s.copy_[a]=t,s.assigned_[a]=!1,!0;if(St(t,i)&&(t!==void 0||He(s.base_,a)))return!0;qe(s),Ze(s)}return s.copy_[a]===t&&(t!==void 0||a in s.copy_)||Number.isNaN(t)&&Number.isNaN(s.copy_[a])||(s.copy_[a]=t,s.assigned_[a]=!0),!0},deleteProperty(s,a){return Ue(s.base_,a)!==void 0||a in s.base_?(s.assigned_[a]=!1,qe(s),Ze(s)):delete s.assigned_[a],s.copy_&&delete s.copy_[a],!0},getOwnPropertyDescriptor(s,a){const t=se(s),r=Reflect.getOwnPropertyDescriptor(t,a);return r&&{writable:!0,configurable:s.type_!==1||a!=="length",enumerable:r.enumerable,value:t[a]}},defineProperty(){J(11)},getPrototypeOf(s){return le(s.base_)},setPrototypeOf(){J(12)}},me={};Pe(rs,(s,a)=>{me[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});me.deleteProperty=function(s,a){return me.set.call(this,s,a,void 0)};me.set=function(s,a,t){return rs.set.call(this,s[0],a,t,s[0])};function Ue(s,a){const t=s[V];return(t?se(t):s)[a]}function Gt(s,a,t){var i;const r=Is(a,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(s.draft_):void 0}function Is(s,a){if(!(a in s))return;let t=le(s);for(;t;){const r=Object.getOwnPropertyDescriptor(t,a);if(r)return r;t=le(t)}}function Ze(s){s.modified_||(s.modified_=!0,s.parent_&&Ze(s.parent_))}function qe(s){s.copy_||(s.copy_=Ke(s.base_,s.scope_.immer_.useStrictShallowCopy_))}var Ot=class{constructor(s){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,t,r)=>{if(typeof a=="function"&&typeof t!="function"){const n=t;t=a;const l=this;return function(m=n,...v){return l.produce(m,x=>t.call(this,x,...v))}}typeof t!="function"&&J(6),r!==void 0&&typeof r!="function"&&J(7);let i;if(te(a)){const n=ps(this),l=Xe(a,void 0);let c=!0;try{i=t(l),c=!1}finally{c?Je(n):Ye(n)}return ms(n,r),hs(i,n)}else if(!a||typeof a!="object"){if(i=t(a),i===void 0&&(i=a),i===Gs&&(i=void 0),this.autoFreeze_&&ts(i,!0),r){const n=[],l=[];re("Patches").generateReplacementPatches_(a,i,n,l),r(n,l)}return i}else J(1,a)},this.produceWithPatches=(a,t)=>{if(typeof a=="function")return(l,...c)=>this.produceWithPatches(l,m=>a(m,...c));let r,i;return[this.produce(a,t,(l,c)=>{r=l,i=c}),r,i]},typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze),typeof(s==null?void 0:s.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(s.useStrictShallowCopy)}createDraft(s){te(s)||J(8),oe(s)&&(s=zt(s));const a=ps(this),t=Xe(s,void 0);return t[V].isManual_=!0,Ye(a),t}finishDraft(s,a){const t=s&&s[V];(!t||!t.isManual_)&&J(9);const{scope_:r}=t;return ms(r,a),hs(void 0,r)}setAutoFreeze(s){this.autoFreeze_=s}setUseStrictShallowCopy(s){this.useStrictShallowCopy_=s}applyPatches(s,a){let t;for(t=a.length-1;t>=0;t--){const i=a[t];if(i.path.length===0&&i.op==="replace"){s=i.value;break}}t>-1&&(a=a.slice(t+1));const r=re("Patches").applyPatches_;return oe(s)?r(s,a):this.produce(s,i=>r(i,a))}};function Xe(s,a){const t=he(s)?re("MapSet").proxyMap_(s,a):ze(s)?re("MapSet").proxySet_(s,a):Et(s,a);return(a?a.scope_:As()).drafts_.push(t),t}function zt(s){return oe(s)||J(10,s),Ms(s)}function Ms(s){if(!te(s)||Ae(s))return s;const a=s[V];let t;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,t=Ke(s,a.scope_.immer_.useStrictShallowCopy_)}else t=Ke(s,!0);return Pe(t,(r,i)=>{zs(t,r,Ms(i))}),a&&(a.finalized_=!1),t}var At=new Ot,It=At.produce;const Mt=s=>(a,t,r)=>(r.setState=(i,n,...l)=>{const c=typeof i=="function"?It(i):i;return a(c,n,...l)},s(r.setState,t,r)),$t=Mt,H=s=>s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),gs=s=>({Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"})[s]||"lucide:box",fs=s=>({Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"})[s]||"Product category",js=s=>({Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas",Decorative:"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles"})[s]||`${s} product range`,vs=s=>{const a={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return a[s]||a.default},Ve={id:1,stepperForm:{steps:[{step:1,title:"Select Product Group",categories:[]},{step:2,title:"Select Product Range",ranges:{}},{step:3,title:"Select Individual Product",products:{}},{step:4,title:"View Product Content",productDetails:{}},{step:5,title:"Configure Options",options:{}},{step:6,title:"Contact Information",fields:[{name:"fullName",label:"Full Name",type:"text",required:!0},{name:"email",label:"Email Address",type:"email",required:!0},{name:"phone",label:"Phone Number",type:"tel",required:!1},{name:"company",label:"Company/Organization",type:"text",required:!1},{name:"message",label:"Additional Notes",type:"textarea",required:!1}]}]}},X=nt()(lt($t((s,a)=>({productData:Ve,productGroups:[],productRanges:[],products:[],relationships:{groupToRanges:{},rangeToProducts:{}},isDirty:!1,isSaving:!1,isLoading:!1,lastSaved:null,error:null,initializeFromWindowData:()=>{const t=window.urbanaAdmin;if(!t){console.warn("No urbanaAdmin window data found");return}t.stepperFormData&&(console.log("Loading stepper form data:",t.stepperFormData),s(r=>{r.productData=t.stepperFormData})),t.stepperDataBuilder&&typeof t.stepperDataBuilder=="object"&&t.stepperDataBuilder.productGroups&&t.stepperDataBuilder.productGroups.length>0?(console.log("Loading existing data builder data:",t.stepperDataBuilder),s(r=>{r.productGroups=t.stepperDataBuilder.productGroups||[],r.productRanges=t.stepperDataBuilder.productRanges||[],r.products=t.stepperDataBuilder.products||[],r.relationships=t.stepperDataBuilder.relationships||{groupToRanges:{},rangeToProducts:{}},t.stepperDataBuilder.lastSaved&&(r.lastSaved=new Date(t.stepperDataBuilder.lastSaved)),r.isDirty=!1})):(console.log("No existing data builder data found, extracting from stepper form data"),t.stepperFormData&&a().initializeFromProductData(t.stepperFormData))},loadData:async t=>{var r;if(!t){a().initializeFromWindowData();return}s(i=>{i.isLoading=!0,i.error=null});try{const i=await fetch(`/wp-json/urbana/v1/data-builder/${t}`,{method:"GET",headers:{"X-WP-Nonce":((r=window.urbanaAdmin)==null?void 0:r.nonce)||""}});if(!i.ok)throw new Error(`Failed to load data: ${i.status} ${i.statusText}`);const n=await i.json();n.stepper_form_data&&s(l=>{l.productData=n.stepper_form_data}),n.stepper_data_builder&&typeof n.stepper_data_builder=="object"&&n.stepper_data_builder.productGroups&&n.stepper_data_builder.productGroups.length>0?(console.log("Loading existing API data builder data:",n.stepper_data_builder),s(l=>{l.productGroups=n.stepper_data_builder.productGroups||[],l.productRanges=n.stepper_data_builder.productRanges||[],l.products=n.stepper_data_builder.products||[],l.relationships=n.stepper_data_builder.relationships||{groupToRanges:{},rangeToProducts:{}},n.stepper_data_builder.lastSaved&&(l.lastSaved=new Date(n.stepper_data_builder.lastSaved))})):(console.log("No existing API data builder data found, extracting from stepper form data"),n.stepper_form_data&&a().initializeFromProductData(n.stepper_form_data))}catch(i){const n=i instanceof Error?i.message:"Unknown error occurred";throw console.error("Error loading data:",n),s(l=>{l.error=n}),i}finally{s(i=>{i.isLoading=!1})}},getRangesForGroup:t=>{const{productRanges:r,relationships:i}=a(),n=i.groupToRanges[t]||[];return r.filter(l=>n.includes(l.id))},getProductsForRange:t=>{const{products:r,relationships:i}=a(),n=i.rangeToProducts[t]||[];return r.filter(l=>n.includes(l.id))},getProductById:t=>{const{products:r}=a();return r.find(i=>i.id===t)},getGroupById:t=>{const{productGroups:r}=a();return r.find(i=>i.id===t)},getRangeById:t=>{const{productRanges:r}=a();return r.find(i=>i.id===t)},saveData:async()=>{var t;s(r=>{r.isSaving=!0,r.error=null});try{const r=a().exportData(),{productGroups:i,productRanges:n,products:l,relationships:c}=a(),m=await fetch("/wp-json/urbana/v1/product-data",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((t=window.urbanaAdmin)==null?void 0:t.nonce)||""},body:JSON.stringify({stepper_form_data:r,stepper_data_builder:{productGroups:i,productRanges:n,products:l,relationships:c,lastSaved:new Date().toISOString()}})});if(!m.ok)throw new Error(`Failed to save data: ${m.status} ${m.statusText}`);const v=await m.json();return s(x=>{x.productData=r,x.isDirty=!1,x.lastSaved=new Date}),console.log("Data saved successfully, stepper ID:",v.stepper_id),v.stepper_id}catch(r){const i=r instanceof Error?r.message:"Unknown error occurred";throw console.error("Error saving data:",i),s(n=>{n.error=i}),r}finally{s(r=>{r.isSaving=!1})}},initializeFromProductData:t=>s(r=>{r.productData=t;const i=(t.stepperForm.steps[0].categories||[]).map(v=>({id:H(v),name:v,icon:gs(v),description:fs(v)}));r.productGroups=i;const n=[];Object.entries(t.stepperForm.steps[1].ranges||{}).forEach(([v,x])=>{x.forEach(y=>{n.push({id:H(y),name:y,image:"",description:js(y),tags:vs(y)})})}),r.productRanges=n;const l=[];Object.entries(t.stepperForm.steps[2].products||{}).forEach(([v,x])=>{x.forEach(y=>{var _;const g=(_=t.stepperForm.steps[3].productDetails)==null?void 0:_[y];l.push({id:H(y),code:y,name:(g==null?void 0:g.name)||`${y} Product`,overview:(g==null?void 0:g.overview)||"",description:(g==null?void 0:g.description)||"",specifications:(g==null?void 0:g.specifications)||[],imageGallery:(g==null?void 0:g.imageGallery)||[],files:(g==null?void 0:g.files)||{}})})}),r.products=l;const c={};Object.entries(t.stepperForm.steps[1].ranges||{}).forEach(([v,x])=>{const y=H(v);c[y]=x.map(g=>H(g))});const m={};Object.entries(t.stepperForm.steps[2].products||{}).forEach(([v,x])=>{const y=H(v);m[y]=x.map(g=>H(g))}),r.relationships={groupToRanges:c,rangeToProducts:m}}),updateProductData:t=>s(r=>{r.productData=t,r.isDirty=!0}),exportData:()=>{const{productGroups:t,productRanges:r,products:i,relationships:n,productData:l}=a();return{id:l.id,stepperForm:{steps:[{step:1,title:"Select Product Group",categories:t.map(m=>m.name)},{step:2,title:"Select Product Range",ranges:(()=>{const m={};return Object.entries(n.groupToRanges).forEach(([v,x])=>{const y=t.find(g=>g.id===v);y&&(m[y.name]=x.map(g=>{const _=r.find(N=>N.id===g);return _?_.name:""}).filter(g=>g!==""))}),m})()},{step:3,title:"Select Individual Product",products:(()=>{const m={};return Object.entries(n.rangeToProducts).forEach(([v,x])=>{const y=r.find(g=>g.id===v);y&&(m[y.name]=x.map(g=>{const _=i.find(N=>N.id===g);return _?_.code:""}).filter(g=>g!==""))}),m})()},{step:4,title:"View Product Content",productDetails:(()=>{const m={};return i.forEach(v=>{m[v.code]={name:v.name,overview:v.overview,description:v.description,specifications:v.specifications,imageGallery:v.imageGallery,files:v.files}}),m})()},l.stepperForm.steps[4]||{step:5,title:"Configure Options",options:{}},l.stepperForm.steps[5]||{step:6,title:"Contact Information",fields:Ve.stepperForm.steps[5].fields}]}}},addProductGroup:t=>s(r=>{const i=H(t.name),n={...t,id:i,icon:t.icon||gs(t.name),description:t.description||fs(t.name)};r.productGroups.some(c=>c.id===i)||(r.productGroups.push(n),r.relationships.groupToRanges[i]=[],r.isDirty=!0)}),updateProductGroup:(t,r)=>s(i=>{const n=i.productGroups.findIndex(l=>l.id===t);n!==-1&&(i.productGroups[n]={...i.productGroups[n],...r},i.isDirty=!0)}),removeProductGroup:t=>s(r=>{r.productGroups=r.productGroups.filter(n=>n.id!==t),(r.relationships.groupToRanges[t]||[]).forEach(n=>{r.productRanges=r.productRanges.filter(c=>c.id!==n),(r.relationships.rangeToProducts[n]||[]).forEach(c=>{r.products=r.products.filter(m=>m.id!==c)}),delete r.relationships.rangeToProducts[n]}),delete r.relationships.groupToRanges[t],r.isDirty=!0}),addProductRange:t=>s(r=>{const i=H(t.name),n={...t,id:i,description:t.description||js(t.name),tags:t.tags||vs(t.name)};r.productRanges.some(c=>c.id===i)||(r.productRanges.push(n),r.relationships.rangeToProducts[i]=[],r.isDirty=!0)}),updateProductRange:(t,r)=>s(i=>{const n=i.productRanges.findIndex(l=>l.id===t);n!==-1&&(i.productRanges[n]={...i.productRanges[n],...r},i.isDirty=!0)}),removeProductRange:t=>s(r=>{r.productRanges=r.productRanges.filter(n=>n.id!==t),(r.relationships.rangeToProducts[t]||[]).forEach(n=>{r.products=r.products.filter(l=>l.id!==n)}),Object.keys(r.relationships.groupToRanges).forEach(n=>{r.relationships.groupToRanges[n]=r.relationships.groupToRanges[n].filter(l=>l!==t)}),delete r.relationships.rangeToProducts[t],r.isDirty=!0}),addProduct:t=>s(r=>{const i=H(t.code||t.name),n={...t,id:i,code:t.code||H(t.name)};r.products.some(c=>c.id===i)||(r.products.push(n),r.isDirty=!0)}),updateProduct:(t,r)=>s(i=>{const n=i.products.findIndex(l=>l.id===t);n!==-1&&(i.products[n]={...i.products[n],...r},i.isDirty=!0)}),removeProduct:t=>s(r=>{r.products=r.products.filter(i=>i.id!==t),Object.keys(r.relationships.rangeToProducts).forEach(i=>{r.relationships.rangeToProducts[i]=r.relationships.rangeToProducts[i].filter(n=>n!==t)}),r.isDirty=!0}),linkRangeToGroup:(t,r)=>s(i=>{i.relationships.groupToRanges[t]||(i.relationships.groupToRanges[t]=[]),i.relationships.groupToRanges[t].includes(r)||(i.relationships.groupToRanges[t].push(r),i.isDirty=!0)}),unlinkRangeFromGroup:(t,r)=>s(i=>{i.relationships.groupToRanges[t]&&(i.relationships.groupToRanges[t]=i.relationships.groupToRanges[t].filter(n=>n!==r),i.isDirty=!0)}),linkProductToRange:(t,r)=>s(i=>{i.relationships.rangeToProducts[t]||(i.relationships.rangeToProducts[t]=[]),i.relationships.rangeToProducts[t].includes(r)||(i.relationships.rangeToProducts[t].push(r),i.isDirty=!0)}),unlinkProductFromRange:(t,r)=>s(i=>{i.relationships.rangeToProducts[t]&&(i.relationships.rangeToProducts[t]=i.relationships.rangeToProducts[t].filter(n=>n!==r),i.isDirty=!0)}),updateRelationships:t=>s(r=>{r.relationships=t,r.isDirty=!0}),updateOptions:t=>s(r=>{r.productData.stepperForm.steps[4]&&(r.productData.stepperForm.steps[4].options=t,r.isDirty=!0)}),updateContactFields:t=>s(r=>{r.productData.stepperForm.steps[5]&&(r.productData.stepperForm.steps[5].fields=t,r.isDirty=!0)}),resetData:()=>s(t=>{t.productData=Ve,t.productGroups=[],t.productRanges=[],t.products=[],t.relationships={groupToRanges:{},rangeToProducts:{}},t.isDirty=!1,t.lastSaved=null,t.error=null}),importData:t=>s(r=>{r.isDirty=!0,r.lastSaved=null,r.error=null,a().initializeFromProductData(t)}),setError:t=>s(r=>{r.error=t}),clearError:()=>s(t=>{t.error=null})})),{name:"urbana-data-builder"})),Lt=({selectedIcon:s,onIconSelect:a})=>{const t=["lucide:box","lucide:home","lucide:bath","lucide:route","lucide:wheelchair","lucide:armchair","lucide:lamp","lucide:tree","lucide:building","lucide:car","lucide:tools","lucide:shield"];return e.jsx("div",{className:"grid grid-cols-6 gap-2",children:t.map(r=>e.jsx(S,{isIconOnly:!0,variant:s===r?"solid":"bordered",color:s===r?"primary":"default",onPress:()=>a(r),className:"h-12 w-12",children:e.jsx(u,{icon:r,width:20})},r))})},Bt=()=>{const{productGroups:s,addProductGroup:a,updateProductGroup:t,removeProductGroup:r,getRangesForGroup:i}=X(),{isOpen:n,onOpen:l,onOpenChange:c,onClose:m}=Ce(),[v,x]=A.useState(null),[y,g]=A.useState({name:"",icon:"lucide:box",description:""}),[_,N]=A.useState({}),F=()=>{x(null),g({name:"",icon:"lucide:box",description:""}),N({}),l()},O=h=>{x(h),g({name:h.name,icon:h.icon,description:h.description}),N({}),l()},E=h=>{const b=i(h).length,f=b>0?`Are you sure you want to delete this product group? This will also remove ${b} associated range(s) and their products.`:"Are you sure you want to delete this product group?";confirm(f)&&r(h)},k=(h,b)=>{g(f=>({...f,[h]:b})),_[h]&&N(f=>({...f,[h]:""}))},T=h=>{g(b=>({...b,icon:h}))},I=()=>{const h={};return y.name.trim()||(h.name="Name is required"),s.some(f=>f.name.toLowerCase()===y.name.toLowerCase()&&(!v||f.id!==v.id))&&(h.name="A product group with this name already exists"),y.description.trim()||(h.description="Description is required"),N(h),Object.keys(h).length===0},G=()=>{I()&&(v?t(v.id,y):a(y),m())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Product Groups"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Organize your products into logical categories"})]}),e.jsx(S,{color:"primary",onPress:F,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Group"})]}),s.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:layers",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Groups Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product group to get started"})]}),e.jsx(S,{color:"primary",onPress:F,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Group"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(h=>{const b=i(h.id).length;return e.jsxs(z,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{icon:e.jsx(u,{icon:h.icon,width:20}),className:"bg-primary-100 text-primary-800",size:"sm"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:h.name}),e.jsxs(B,{size:"sm",variant:"flat",color:"primary",children:[b," range",b!==1?"s":""]})]})]}),e.jsxs(Qe,{children:[e.jsx(es,{children:e.jsx(S,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(ss,{"aria-label":"Group Actions",children:[e.jsx(ne,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>O(h),children:"Edit"},"edit"),e.jsx(ne,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>E(h.id),children:"Delete"},"delete")]})]})]})}),e.jsx($,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-foreground-600",children:h.description})})]},h.id)})}),e.jsx(Se,{isOpen:n,onOpenChange:c,size:"lg",className:"urbana-modal",children:e.jsx(Fe,{children:h=>e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:v?"Edit Product Group":"Add Product Group"}),e.jsx(Te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{label:"Name",placeholder:"Enter group name",value:y.name,onChange:b=>k("name",b.target.value),errorMessage:_.name,isInvalid:!!_.name,isRequired:!0,classNames:{input:"urbana-input"}}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Icon"}),e.jsx(Lt,{selectedIcon:y.icon,onIconSelect:T})]}),e.jsx(de,{label:"Description",placeholder:"Enter group description",value:y.description,onChange:b=>k("description",b.target.value),errorMessage:_.description,isInvalid:!!_.description,isRequired:!0,rows:3,classNames:{input:"urbana-input"}})]})}),e.jsxs(Ee,{children:[e.jsx(S,{variant:"light",onPress:h,children:"Cancel"}),e.jsxs(S,{color:"primary",onPress:G,children:[v?"Update":"Add"," Group"]})]})]})})})]})},Ut=({tags:s,onTagsChange:a})=>{const[t,r]=A.useState(""),i=l=>{if(l.key==="Enter"&&t.trim()){l.preventDefault();const c=t.trim();s.includes(c)||a([...s,c]),r("")}},n=l=>{a(s.filter(c=>c!==l))};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{placeholder:"Type a tag and press Enter",value:t,onChange:l=>r(l.target.value),onKeyDown:i,classNames:{input:"urbana-input"}}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(l=>e.jsx(B,{onClose:()=>n(l),variant:"flat",size:"sm",children:l},l))})]})},qt=()=>{const{productRanges:s,productGroups:a,addProductRange:t,updateProductRange:r,removeProductRange:i,getProductsForRange:n,linkRangeToGroup:l,unlinkRangeFromGroup:c,relationships:m}=X(),{isOpen:v,onOpen:x,onOpenChange:y,onClose:g}=Ce(),[_,N]=A.useState(null),[F,O]=A.useState({name:"",image:"",description:"",tags:[]}),[E,k]=A.useState(new Set),[T,I]=A.useState({}),G=()=>{N(null),O({name:"",image:"",description:"",tags:[]}),k(new Set),I({}),x()},h=o=>{N(o),O({name:o.name,image:o.image,description:o.description,tags:[...o.tags]});const p=new Set;Object.entries(m.groupToRanges).forEach(([D,M])=>{M.includes(o.id)&&p.add(D)}),k(p),I({}),x()},b=o=>{const p=n(o).length,D=p>0?`Are you sure you want to delete this product range? This will also remove ${p} associated product(s).`:"Are you sure you want to delete this product range?";confirm(D)&&i(o)},f=(o,p)=>{O(D=>({...D,[o]:p})),T[o]&&I(D=>({...D,[o]:""}))},P=()=>{const o={};return F.name.trim()||(o.name="Name is required"),s.some(D=>D.name.toLowerCase()===F.name.toLowerCase()&&(!_||D.id!==_.id))&&(o.name="A product range with this name already exists"),F.description.trim()||(o.description="Description is required"),E.size===0&&(o.groups="Please select at least one product group"),I(o),Object.keys(o).length===0},d=()=>{if(!P())return;let o;_?(r(_.id,F),o=_.id,Object.keys(m.groupToRanges).forEach(p=>{c(p,_.id)})):(t(F),o=F.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),E.forEach(p=>{l(p,o)}),g()},w=()=>{const o={},p=[];return s.forEach(D=>{let M=!1;Object.entries(m.groupToRanges).forEach(([R,U])=>{if(U.includes(D.id)){const Z=a.find(Ie=>Ie.id===R);Z&&(o[Z.name]||(o[Z.name]=[]),o[Z.name].push(D),M=!0)}}),M||p.push(D)}),{grouped:o,ungrouped:p}},{grouped:C,ungrouped:j}=w();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Product Ranges"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Define specific product lines within each group"})]}),e.jsx(S,{color:"primary",onPress:G,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),isDisabled:a.length===0,children:"Add Product Range"})]}),a.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:alert-circle",width:48,className:"text-warning-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Groups Available"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"You need to create product groups first before adding ranges"})]})]})})}):s.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Ranges Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product range to organize your products"})]}),e.jsx(S,{color:"primary",onPress:G,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Range"})]})})}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(C).map(([o,p])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:18}),o,e.jsxs(B,{size:"sm",variant:"flat",children:[p.length," range",p.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(D=>e.jsx(bs,{range:D,onEdit:h,onDelete:b},D.id))})]},o)),j.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-warning-600",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:18}),"Ungrouped Ranges",e.jsxs(B,{size:"sm",variant:"flat",color:"warning",children:[j.length," range",j.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(o=>e.jsx(bs,{range:o,onEdit:h,onDelete:b},o.id))})]})]}),e.jsx(Se,{isOpen:v,onOpenChange:y,size:"2xl",className:"urbana-modal",children:e.jsx(Fe,{children:o=>e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:_?"Edit Product Range":"Add Product Range"}),e.jsx(Te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{label:"Name",placeholder:"Enter range name",value:F.name,onChange:p=>f("name",p.target.value),errorMessage:T.name,isInvalid:!!T.name,isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(ye,{label:"Product Groups",placeholder:"Select product groups for this range",selectionMode:"multiple",selectedKeys:E,onSelectionChange:p=>k(p),errorMessage:T.groups,isInvalid:!!T.groups,isRequired:!0,children:a.map(p=>e.jsx(Ne,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:p.icon,width:16}),p.name]})},p.id))}),e.jsx(Y,{label:"Image URL",placeholder:"Enter image URL (optional)",value:F.image,onChange:p=>f("image",p.target.value),classNames:{input:"urbana-input"}}),e.jsx(de,{label:"Description",placeholder:"Enter range description",value:F.description,onChange:p=>f("description",p.target.value),errorMessage:T.description,isInvalid:!!T.description,isRequired:!0,rows:3,classNames:{input:"urbana-input"}}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Tags"}),e.jsx(Ut,{tags:F.tags,onTagsChange:p=>f("tags",p)})]})]})}),e.jsxs(Ee,{children:[e.jsx(S,{variant:"light",onPress:o,children:"Cancel"}),e.jsxs(S,{color:"primary",onPress:d,children:[_?"Update":"Add"," Range"]})]})]})})})]})},bs=({range:s,onEdit:a,onDelete:t})=>{const{getProductsForRange:r}=X(),i=r(s.id).length;return e.jsxs(z,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.image?e.jsx(_s,{src:s.image,alt:s.name,width:40,height:40,className:"rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-secondary-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{icon:"lucide:grid-3x3",width:20,className:"text-secondary-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:s.name}),e.jsxs(B,{size:"sm",variant:"flat",color:"secondary",children:[i," product",i!==1?"s":""]})]})]}),e.jsxs(Qe,{children:[e.jsx(es,{children:e.jsx(S,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(ss,{"aria-label":"Range Actions",children:[e.jsx(ne,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>a(s),children:"Edit"},"edit"),e.jsx(ne,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>t(s.id),children:"Delete"},"delete")]})]})]})}),e.jsxs($,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:s.description}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.map(n=>e.jsx(B,{size:"sm",variant:"flat",color:"default",children:n},n))})]})]})},Vt=({files:s,onFilesChange:a})=>{const[t,r]=A.useState(""),[i,n]=A.useState(""),l=()=>{t.trim()&&i.trim()&&(a({...s,[t.trim()]:i.trim()}),r(""),n(""))},c=m=>{const v={...s};delete v[m],a(v)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{placeholder:"File name",value:t,onChange:m=>r(m.target.value),size:"sm",classNames:{input:"urbana-input"}}),e.jsx(Y,{placeholder:"File URL",value:i,onChange:m=>n(m.target.value),size:"sm",classNames:{input:"urbana-input"}}),e.jsx(S,{size:"sm",color:"primary",onPress:l,isDisabled:!t.trim()||!i.trim(),children:"Add"})]}),Object.entries(s).length>0&&e.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([m,v])=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:m}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:v})]}),e.jsx(S,{size:"sm",variant:"light",color:"danger",onPress:()=>c(m),children:"Remove"})]},m))})]})},Wt=({specifications:s,onSpecificationsChange:a})=>{const[t,r]=A.useState(""),i=()=>{t.trim()&&!s.includes(t.trim())&&(a([...s,t.trim()]),r(""))},n=l=>{a(s.filter(c=>c!==l))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{placeholder:"Add specification",value:t,onChange:l=>r(l.target.value),onKeyPress:l=>l.key==="Enter"&&i(),size:"sm",classNames:{input:"urbana-input"}}),e.jsx(S,{size:"sm",color:"primary",onPress:i,isDisabled:!t.trim(),children:"Add"})]}),s.length>0&&e.jsx("div",{className:"space-y-2",children:s.map((l,c)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx(S,{size:"sm",variant:"light",color:"danger",onPress:()=>n(l),children:"Remove"})]},c))})]})},Ht=()=>{const{products:s,productRanges:a,addProduct:t,updateProduct:r,removeProduct:i,linkProductToRange:n,unlinkProductFromRange:l,relationships:c}=X(),{isOpen:m,onOpen:v,onOpenChange:x,onClose:y}=Ce(),[g,_]=A.useState(null),[N,F]=A.useState({code:"",name:"",overview:"",description:"",specifications:[],imageGallery:[],files:{}}),[O,E]=A.useState(new Set),[k,T]=A.useState({}),I=()=>{_(null),F({code:"",name:"",overview:"",description:"",specifications:[],imageGallery:[],files:{}}),E(new Set),T({}),v()},G=j=>{_(j),F({code:j.code,name:j.name,overview:j.overview,description:j.description,specifications:[...j.specifications],imageGallery:[...j.imageGallery],files:{...j.files}});const o=new Set;Object.entries(c.rangeToProducts).forEach(([p,D])=>{D.includes(j.id)&&o.add(p)}),E(o),T({}),v()},h=j=>{confirm("Are you sure you want to delete this product?")&&i(j)},b=(j,o)=>{if(F(p=>({...p,[j]:o})),j==="name"&&!N.code&&typeof o=="string"){const p=o.toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"");F(D=>({...D,code:p}))}k[j]&&T(p=>({...p,[j]:""}))},f=()=>{const j={};return N.code.trim()||(j.code="Product code is required"),s.some(p=>p.code.toLowerCase()===N.code.toLowerCase()&&(!g||p.id!==g.id))&&(j.code="A product with this code already exists"),N.name.trim()||(j.name="Product name is required"),N.overview.trim()||(j.overview="Product overview is required"),N.description.trim()||(j.description="Product description is required"),O.size===0&&(j.ranges="Please select at least one product range"),T(j),Object.keys(j).length===0},P=()=>{if(!f())return;let j;g?(r(g.id,N),j=g.id,Object.keys(c.rangeToProducts).forEach(o=>{l(o,g.id)})):(t(N),j=(N.code||N.name).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),O.forEach(o=>{n(o,j)}),y()},d=()=>{const j={},o=[];return s.forEach(p=>{let D=!1;Object.entries(c.rangeToProducts).forEach(([M,R])=>{if(R.includes(p.id)){const U=a.find(Z=>Z.id===M);U&&(j[U.name]||(j[U.name]=[]),j[U.name].push(p),D=!0)}}),D||o.push(p)}),{grouped:j,ungrouped:o}},{grouped:w,ungrouped:C}=d();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Products"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Manage individual products with detailed specifications"})]}),e.jsx(S,{color:"primary",onPress:I,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),isDisabled:a.length===0,children:"Add Product"})]}),a.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:alert-circle",width:48,className:"text-warning-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Ranges Available"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"You need to create product ranges first before adding products"})]})]})})}):s.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:package",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Products Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product to get started"})]}),e.jsx(S,{color:"primary",onPress:I,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product"})]})})}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(w).map(([j,o])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:18}),j,e.jsxs(B,{size:"sm",variant:"flat",children:[o.length," product",o.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(p=>e.jsx(ys,{product:p,onEdit:G,onDelete:h},p.id))})]},j)),C.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-warning-600",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:18}),"Ungrouped Products",e.jsxs(B,{size:"sm",variant:"flat",color:"warning",children:[C.length," product",C.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(j=>e.jsx(ys,{product:j,onEdit:G,onDelete:h},j.id))})]})]}),e.jsx(Se,{isOpen:m,onOpenChange:x,size:"3xl",scrollBehavior:"inside",className:"urbana-modal",children:e.jsx(Fe,{children:j=>e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:g?"Edit Product":"Add Product"}),e.jsx(Te,{children:e.jsxs(Ge,{"aria-label":"Product Details",defaultSelectedKey:"basic",children:[e.jsx(q,{title:"Basic Info",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Y,{label:"Product Code",placeholder:"e.g., SH-PEN-001",value:N.code,onChange:o=>b("code",o.target.value),errorMessage:k.code,isInvalid:!!k.code,isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(Y,{label:"Product Name",placeholder:"Enter product name",value:N.name,onChange:o=>b("name",o.target.value),errorMessage:k.name,isInvalid:!!k.name,isRequired:!0,classNames:{input:"urbana-input"}})]}),e.jsx(ye,{label:"Product Ranges",placeholder:"Select product ranges",selectionMode:"multiple",selectedKeys:O,onSelectionChange:o=>E(o),errorMessage:k.ranges,isInvalid:!!k.ranges,isRequired:!0,children:a.map(o=>e.jsx(Ne,{children:o.name},o.id))}),e.jsx(de,{label:"Overview",placeholder:"Brief product overview",value:N.overview,onChange:o=>b("overview",o.target.value),errorMessage:k.overview,isInvalid:!!k.overview,isRequired:!0,rows:2,classNames:{input:"urbana-input"}}),e.jsx(de,{label:"Description",placeholder:"Detailed product description",value:N.description,onChange:o=>b("description",o.target.value),errorMessage:k.description,isInvalid:!!k.description,isRequired:!0,rows:4,classNames:{input:"urbana-input"}})]})},"basic"),e.jsx(q,{title:"Specifications",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Product Specifications"}),e.jsx(Wt,{specifications:N.specifications,onSpecificationsChange:o=>b("specifications",o)})]})})},"specifications"),e.jsx(q,{title:"Files & Images",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Image Gallery (URLs)"}),e.jsxs("div",{className:"space-y-2",children:[N.imageGallery.map((o,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{placeholder:"Image URL",value:o,onChange:D=>{const M=[...N.imageGallery];M[p]=D.target.value,b("imageGallery",M)},size:"sm",classNames:{input:"urbana-input"}}),e.jsx(S,{size:"sm",variant:"light",color:"danger",onPress:()=>{const D=N.imageGallery.filter((M,R)=>R!==p);b("imageGallery",D)},children:"Remove"})]},p)),e.jsx(S,{size:"sm",variant:"flat",onPress:()=>b("imageGallery",[...N.imageGallery,""]),children:"Add Image"})]})]}),e.jsx(ot,{}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Product Files"}),e.jsx(Vt,{files:N.files,onFilesChange:o=>b("files",o)})]})]})},"files")]})}),e.jsxs(Ee,{children:[e.jsx(S,{variant:"light",onPress:j,children:"Cancel"}),e.jsxs(S,{color:"primary",onPress:P,children:[g?"Update":"Add"," Product"]})]})]})})})]})},ys=({product:s,onEdit:a,onDelete:t})=>{const r=s.imageGallery.length>0&&s.imageGallery[0];return e.jsxs(z,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r?e.jsx(_s,{src:s.imageGallery[0],alt:s.name,width:40,height:40,className:"rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-success-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{icon:"lucide:package",width:20,className:"text-success-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:s.name}),e.jsx(B,{size:"sm",variant:"flat",color:"success",children:s.code})]})]}),e.jsxs(Qe,{children:[e.jsx(es,{children:e.jsx(S,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(ss,{"aria-label":"Product Actions",children:[e.jsx(ne,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>a(s),children:"Edit"},"edit"),e.jsx(ne,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>t(s.id),children:"Delete"},"delete")]})]})]})}),e.jsxs($,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:s.overview}),s.specifications.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-foreground-700",children:"Specifications:"}),e.jsxs("div",{className:"text-xs text-foreground-500",children:[s.specifications.slice(0,3).map((i,n)=>e.jsxs("div",{children:["• ",i]},n)),s.specifications.length>3&&e.jsxs("div",{children:["... and ",s.specifications.length-3," more"]})]})]})]})]})},Kt=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,linkRangeToGroup:i,unlinkRangeFromGroup:n,linkProductToRange:l,unlinkProductFromRange:c}=X(),[m,v]=A.useState(null),[x,y]=A.useState(null),[g,_]=A.useState(!1),N=()=>s.map(d=>{const w=r.groupToRanges[d.id]||[],C=w.map(j=>{const o=a.find(M=>M.id===j),p=r.rangeToProducts[j]||[],D=p.map(M=>{const R=t.find(U=>U.id===M);return{id:M,name:(R==null?void 0:R.name)||"Unknown Product",code:R==null?void 0:R.code,overview:R==null?void 0:R.overview,type:"product",hasIssues:!R}}).filter(Boolean);return{id:j,name:(o==null?void 0:o.name)||"Unknown Range",description:o==null?void 0:o.description,type:"range",children:D,hasIssues:!o||p.length===0}}).filter(Boolean);return{id:d.id,name:d.name,description:d.description,type:"group",children:C,hasIssues:w.length===0}}),F=()=>{const d=a.filter(C=>!Object.values(r.groupToRanges).some(j=>j.includes(C.id))),w=t.filter(C=>!Object.values(r.rangeToProducts).some(j=>j.includes(C.id)));return{orphanedRanges:d,orphanedProducts:w}},O=()=>{const{orphanedRanges:d,orphanedProducts:w}=F(),C=Object.values(r.groupToRanges).reduce((o,p)=>o+p.length,0)+Object.values(r.rangeToProducts).reduce((o,p)=>o+p.length,0),j=Math.round((s.length-s.filter(o=>(r.groupToRanges[o.id]||[]).length===0).length+(a.length-d.length)+(t.length-w.length))/(s.length+a.length+t.length)*100);return{totalConnections:C,orphanedRanges:d.length,orphanedProducts:w.length,completionRate:isNaN(j)?0:j}},E=(d,w)=>{i(d,w)},k=(d,w)=>{n(d,w)},T=(d,w)=>{l(d,w)},I=(d,w)=>{c(d,w)},G=async()=>{_(!0),await new Promise(d=>setTimeout(d,1500)),_(!1)},h=N(),{orphanedRanges:b,orphanedProducts:f}=F(),P=O();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Relationship Manager"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Manage connections between groups, ranges, and products"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(S,{color:"secondary",variant:"flat",onPress:G,startContent:e.jsx(u,{icon:"lucide:search",width:18}),isLoading:g,children:g?"Analyzing...":"Analyze Structure"})})]}),e.jsx(z,{className:"mb-6",children:e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:P.totalConnections}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Total Connections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-warning-600",children:P.orphanedRanges}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Orphaned Ranges"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-danger-600",children:P.orphanedProducts}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Orphaned Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-success-600",children:[P.completionRate,"%"]}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Structure Complete"}),e.jsx(Dt,{value:P.completionRate,color:P.completionRate>80?"success":P.completionRate>50?"warning":"danger",size:"sm",className:"mt-1"})]})]})})}),e.jsxs(Ge,{"aria-label":"Relationship Views",defaultSelectedKey:"tree",children:[e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:git-branch",width:16}),"Tree View"]}),children:e.jsxs("div",{className:"space-y-4",children:[h.length===0?e.jsx(z,{children:e.jsx($,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:git-branch",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Structure Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create groups, ranges, and products to see the relationship tree"})]})]})})}):e.jsx(Ds,{selectionMode:"multiple",variant:"bordered",children:h.map(d=>{var w;return e.jsx(Cs,{title:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{icon:e.jsx(u,{icon:"lucide:folder",width:16}),className:"w-6 h-6 bg-primary-100 text-primary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:d.name}),d.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-500"})]}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.description||"No description"})]}),e.jsx(os,{content:((w=d.children)==null?void 0:w.length)||0,color:"primary",size:"sm",children:e.jsx("div",{className:"w-4 h-4"})})]}),children:d.children&&d.children.length>0?e.jsx("div",{className:"space-y-3 pl-4",children:d.children.map(C=>{var j;return e.jsxs("div",{className:"border-l-2 border-gray-200 pl-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ie,{icon:e.jsx(u,{icon:"lucide:grid-3x3",width:16}),className:"w-6 h-6 bg-secondary-100 text-secondary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:C.name}),C.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-500"})]}),e.jsx("div",{className:"text-xs text-foreground-500",children:C.description||"No description"})]}),e.jsx(os,{content:((j=C.children)==null?void 0:j.length)||0,color:"secondary",size:"sm",children:e.jsx("div",{className:"w-4 h-4"})})]}),C.children&&C.children.length>0&&e.jsx("div",{className:"space-y-2 pl-8",children:C.children.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx(ie,{icon:e.jsx(u,{icon:"lucide:package",width:16}),className:"w-5 h-5 bg-success-100 text-success-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:o.name}),o.code&&e.jsx(B,{size:"sm",variant:"flat",color:"success",children:o.code}),o.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:14,className:"text-warning-500"})]}),o.overview&&e.jsx("div",{className:"text-xs text-foreground-500",children:o.overview})]})]},o.id))})]},C.id)})}):e.jsxs("div",{className:"text-center py-6 text-foreground-400",children:[e.jsx(u,{icon:"lucide:inbox",width:32,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No ranges linked to this group"})]})},d.id)})}),(b.length>0||f.length>0)&&e.jsxs(z,{className:"border-warning-200 bg-warning-50",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2 text-warning-700",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:20}),e.jsx("h4",{className:"font-semibold",children:"Orphaned Items"})]})}),e.jsxs($,{className:"pt-0",children:[b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Unlinked Ranges:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b.map(d=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:16,className:"text-secondary-600"}),e.jsx("span",{className:"text-sm",children:d.name}),e.jsx("span",{className:"text-xs text-gray-500",children:d.description})]},d.id))})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Unlinked Products:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:f.map(d=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border",children:[e.jsx(u,{icon:"lucide:package",width:16,className:"text-success-600"}),e.jsx("span",{className:"text-sm",children:d.name}),e.jsx(B,{size:"sm",variant:"flat",color:"success",children:d.code})]},d.id))})]})]})]})]})},"tree"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:link",width:16}),"Manage Links"]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:arrow-right",width:16}),"Group → Range Links"]})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ye,{label:"Select Group",placeholder:"Choose a product group",selectedKeys:m?new Set([m]):new Set,onSelectionChange:d=>v(Array.from(d)[0]||null),children:s.map(d=>e.jsx(Ne,{children:d.name},d.id))}),m&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground-700",children:"Available Ranges:"}),a.map(d=>{const w=(r.groupToRanges[m]||[]).includes(d.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:16,className:"text-secondary-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:d.name}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.description})]})]}),e.jsx(S,{size:"sm",color:w?"danger":"primary",variant:w?"flat":"solid",onPress:()=>{w?k(m,d.id):E(m,d.id)},children:w?"Unlink":"Link"})]},d.id)})]})]})})]}),e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:arrow-right",width:16}),"Range → Product Links"]})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ye,{label:"Select Range",placeholder:"Choose a product range",selectedKeys:x?new Set([x]):new Set,onSelectionChange:d=>y(Array.from(d)[0]||null),children:a.map(d=>e.jsx(Ne,{children:d.name},d.id))}),x&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground-700",children:"Available Products:"}),t.map(d=>{const w=(r.rangeToProducts[x]||[]).includes(d.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{icon:"lucide:package",width:16,className:"text-success-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:d.name}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.code})]})]}),e.jsx(S,{size:"sm",color:w?"danger":"primary",variant:w?"flat":"solid",onPress:()=>{w?I(x,d.id):T(x,d.id)},children:w?"Unlink":"Link"})]},d.id)})]})]})})]})]})},"manage"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:bar-chart-3",width:16}),"Analysis"]}),children:e.jsx("div",{className:"space-y-6",children:g?e.jsx(z,{children:e.jsxs($,{className:"text-center py-12",children:[e.jsx(Rs,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-foreground-600",children:"Analyzing relationship structure..."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(K,{children:e.jsx("h4",{className:"font-semibold",children:"Structure Analysis"})}),e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Groups"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Groups"}),e.jsx("span",{className:"text-sm font-medium",children:s.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"With Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:s.filter(d=>(r.groupToRanges[d.id]||[]).length>0).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Empty Groups"}),e.jsx("span",{className:"text-sm font-medium text-warning-600",children:s.filter(d=>(r.groupToRanges[d.id]||[]).length===0).length})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Ranges"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:a.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Linked to Groups"}),e.jsx("span",{className:"text-sm font-medium",children:a.length-b.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"With Products"}),e.jsx("span",{className:"text-sm font-medium",children:a.filter(d=>(r.rangeToProducts[d.id]||[]).length>0).length})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Products"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Products"}),e.jsx("span",{className:"text-sm font-medium",children:t.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Linked to Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:t.length-f.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Orphaned"}),e.jsx("span",{className:"text-sm font-medium text-danger-600",children:f.length})]})]})]})]})})]}),e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:lightbulb",width:16}),"Recommendations"]})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-3",children:[P.orphanedProducts>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-danger-50 rounded-lg border border-danger-200",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-danger-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-danger-800",children:["You have ",P.orphanedProducts," unlinked product",P.orphanedProducts!==1?"s":""]}),e.jsx("p",{className:"text-xs text-danger-600",children:"Link these products to ranges so they appear in your product stepper."})]})]}),P.orphanedRanges>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-warning-50 rounded-lg border border-warning-200",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-warning-800",children:["You have ",P.orphanedRanges," unlinked range",P.orphanedRanges!==1?"s":""]}),e.jsx("p",{className:"text-xs text-warning-600",children:"Link these ranges to product groups to organize your structure."})]})]}),s.filter(d=>(r.groupToRanges[d.id]||[]).length===0).length>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-primary-50 rounded-lg border border-primary-200",children:[e.jsx(u,{icon:"lucide:info",width:16,className:"text-primary-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-800",children:"Some product groups are empty"}),e.jsx("p",{className:"text-xs text-primary-600",children:"Consider linking ranges to these groups or removing unused groups."})]})]}),P.completionRate>=90&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-success-50 rounded-lg border border-success-200",children:[e.jsx(u,{icon:"lucide:check-circle",width:16,className:"text-success-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-success-800",children:"Great job! Your structure is well organized"}),e.jsx("p",{className:"text-xs text-success-600",children:"Your data structure is ready for the product stepper."})]})]})]})})]})]})})},"analysis")]})]})},Jt=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,exportData:i,importData:n}=X(),{isOpen:l,onOpen:c,onOpenChange:m,onClose:v}=Ce(),[x,y]=A.useState(""),[g,_]=A.useState(""),[N,F]=A.useState("structure"),O=()=>({stepperForm:{steps:s.map((P,d)=>{const w=r.groupToRanges[P.id]||[],C=w.map(o=>{const p=a.find(D=>D.id===o);return(p==null?void 0:p.name)||"Unknown Range"}),j={};return w.forEach(o=>{const p=a.find(D=>D.id===o);if(p){const D=r.rangeToProducts[o]||[];j[p.name]=D.map(M=>{const R=t.find(U=>U.id===M);return{id:(R==null?void 0:R.id)||M,code:(R==null?void 0:R.code)||"",name:(R==null?void 0:R.name)||"Unknown Product",overview:(R==null?void 0:R.overview)||"",description:(R==null?void 0:R.description)||"",specifications:(R==null?void 0:R.specifications)||[],imageGallery:(R==null?void 0:R.imageGallery)||[],files:(R==null?void 0:R.files)||{}}})}}),{step:d+1,title:P.name,categories:C.length>0?C:void 0,products:j}})}}),E=()=>{const f=i();_(JSON.stringify(f,null,2)),F("json")},k=()=>{try{const f=JSON.parse(x);n(f),y(""),v()}catch{alert("Invalid JSON format. Please check your data.")}},T=()=>{const f=O(),P=JSON.stringify(f,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(P),w="stepper-config.json",C=document.createElement("a");C.setAttribute("href",d),C.setAttribute("download",w),C.click()},I=()=>{const f=O();navigator.clipboard.writeText(JSON.stringify(f,null,2))},G=O(),h={};G.stepperForm.steps.forEach(f=>{f.products&&Object.entries(f.products).forEach(([P,d])=>{h[P]||(h[P]=[]),h[P].push(...d)})});const b={totalSteps:G.stepperForm.steps.length,totalCategories:Object.keys(h).length,totalProducts:Object.values(h).reduce((f,P)=>f+P.length,0),hasIssues:G.stepperForm.steps.some(f=>!f.categories||f.categories.length===0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Data Preview"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Preview and export your stepper configuration"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"flat",onPress:c,startContent:e.jsx(u,{icon:"lucide:upload",width:18}),children:"Import"}),e.jsx(S,{color:"secondary",onPress:E,startContent:e.jsx(u,{icon:"lucide:download",width:18}),children:"Export Data"}),e.jsx(S,{color:"primary",onPress:T,startContent:e.jsx(u,{icon:"lucide:file-down",width:18}),children:"Download Config"})]})]}),e.jsx(z,{className:"mb-6",children:e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:b.totalSteps}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Stepper Steps"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-secondary-600",children:b.totalCategories}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Categories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-success-600",children:b.totalProducts}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${b.hasIssues?"text-warning-600":"text-success-600"}`,children:b.hasIssues?e.jsx(u,{icon:"lucide:alert-triangle",width:32}):e.jsx(u,{icon:"lucide:check-circle",width:32})}),e.jsx("div",{className:"text-sm text-foreground-500",children:b.hasIssues?"Has Issues":"Ready"})]})]})})}),e.jsxs(Ge,{"aria-label":"Preview Options",selectedKey:N,onSelectionChange:f=>F(f),children:[e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:16}),"Structure Preview"]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:list",width:16}),"Stepper Steps"]})}),e.jsx($,{children:G.stepperForm.steps.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{icon:"lucide:layers",width:48,className:"mx-auto text-foreground-300 mb-4"}),e.jsx("p",{className:"text-foreground-600",children:"No stepper steps configured"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create product groups to generate stepper steps"})]}):e.jsx("div",{className:"space-y-4",children:G.stepperForm.steps.map(f=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary-600",children:f.step})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold",children:f.title}),f.categories&&f.categories.length>0?e.jsx("div",{className:"flex gap-1 mt-1",children:f.categories.map((P,d)=>e.jsx(B,{size:"sm",variant:"flat",color:"secondary",children:P},d))}):e.jsxs("p",{className:"text-sm text-warning-600 mt-1",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:14,className:"inline mr-1"}),"No categories linked"]})]})]},f.step))})})]}),e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:package",width:16}),"Products by Category"]})}),e.jsx($,{children:Object.keys(h).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{icon:"lucide:package",width:48,className:"mx-auto text-foreground-300 mb-4"}),e.jsx("p",{className:"text-foreground-600",children:"No products configured"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Link products to ranges to see them here"})]}):e.jsx(Ds,{variant:"bordered",children:Object.entries(h).map(([f,P])=>e.jsx(Cs,{title:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{icon:e.jsx(u,{icon:"lucide:grid-3x3",width:16}),className:"w-6 h-6 bg-secondary-100 text-secondary-600"}),e.jsx("span",{className:"font-medium",children:f}),e.jsxs(B,{size:"sm",variant:"flat",color:"secondary",children:[P.length," product",P.length!==1?"s":""]})]}),children:e.jsx("div",{className:"space-y-3 pl-4",children:P.map(d=>e.jsx("div",{className:"border-l-2 border-success-200 pl-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ie,{icon:e.jsx(u,{icon:"lucide:package",width:16}),className:"w-8 h-8 bg-success-100 text-success-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h6",{className:"font-semibold",children:d.name}),e.jsx(B,{size:"sm",variant:"flat",color:"success",children:d.code})]}),e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:d.overview}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Specifications:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:d.specifications.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Images:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:d.imageGallery.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Files:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:Object.keys(d.files).length})]})]})]})]})},d.id))})},f))})})]})]})},"structure"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:code",width:16}),"JSON Preview"]}),children:e.jsxs(z,{children:[e.jsxs(K,{className:"flex flex-row justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:"Configuration JSON"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{size:"sm",variant:"flat",onPress:I,startContent:e.jsx(u,{icon:"lucide:copy",width:16}),children:"Copy"}),e.jsx(S,{size:"sm",color:"primary",onPress:T,startContent:e.jsx(u,{icon:"lucide:download",width:16}),children:"Download"})]})]}),e.jsx($,{children:e.jsx(Pt,{className:"w-full max-h-96 overflow-auto text-xs",children:g||JSON.stringify(G,null,2)})})]})},"json")]}),e.jsx(Se,{isOpen:l,onOpenChange:m,size:"2xl",children:e.jsx(Fe,{children:f=>e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:"Import Configuration"}),e.jsx(Te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-warning-50 border border-warning-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-warning-800",children:"Warning"}),e.jsx("p",{className:"text-xs text-warning-600",children:"Importing will replace all current data. Make sure to export your current configuration first if needed."})]})]})}),e.jsx(de,{label:"JSON Data",placeholder:"Paste your exported JSON configuration here...",value:x,onChange:P=>y(P.target.value),rows:12,className:"font-mono text-sm"})]})}),e.jsxs(Ee,{children:[e.jsx(S,{variant:"light",onPress:f,children:"Cancel"}),e.jsx(S,{color:"primary",onPress:k,isDisabled:!x.trim(),children:"Import"})]})]})})})]})},Yt=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,exportData:i,importData:n,error:l,productData:c,loadData:m,saveData:v,isLoading:x,isSaving:y,isDirty:g,lastSaved:_,initializeFromWindowData:N,clearError:F}=X(),[O,E]=L.useState(null);L.useEffect(()=>{const h=window.urbanaAdmin;h&&(N(),E(h.stepperId||1))},[N]);const k=async()=>{try{F();const h=await v();h&&E(h),ee({color:"success",title:"Data saved successfully!"})}catch(h){console.error("Failed to save data:",h),ee({color:"danger",title:"Failed to save data. Please try again."})}},T=async h=>{try{const b=new URL(window.location.href);b.searchParams.set("stepper_id",h.toString()),window.location.href=b.toString()}catch(b){console.error("Failed to load data builder:",b),ee({color:"danger",title:"Failed to load data builder"})}},I=()=>{try{const h=i(),b="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(h,null,2)),f=document.createElement("a");f.setAttribute("href",b),f.setAttribute("download","product-configurator-data.json"),document.body.appendChild(f),f.click(),f.remove(),ee({color:"success",title:"Data exported successfully!"})}catch(h){console.error("Export failed:",h),ee({color:"danger",title:"Failed to export data"})}},G=h=>{var P;const b=(P=h.target.files)==null?void 0:P[0];if(!b)return;const f=new FileReader;f.onload=d=>{var w;try{const C=JSON.parse((w=d.target)==null?void 0:w.result);n(C),h.target.value="",ee({color:"success",title:"Data imported successfully!"})}catch(C){console.error("Error parsing imported data:",C),ee({color:"danger",title:"Invalid data format. Please check your JSON file."})}},f.readAsText(b)};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold text-foreground",children:["Data Management",O&&e.jsxs("span",{className:"text-sm text-foreground-500 ml-2",children:["(Stepper ID: ",O,")"]})]}),e.jsx("p",{className:"text-sm text-foreground-500 mt-1",children:"Manage product groups, ranges, products, and their relationships"})]})}),e.jsxs("div",{className:"flex gap-2",children:[_&&e.jsxs("div",{className:"text-sm text-foreground-500 text-right ml-6",children:[e.jsx("div",{className:"text-xs",children:"Last saved:"}),e.jsx("div",{className:"font-medium",children:new Date(_).toLocaleString()})]}),e.jsx(S,{color:g?"primary":"success",variant:g?"solid":"flat",onPress:k,isLoading:y,isDisabled:y,startContent:y?"":e.jsx(u,{icon:"lucide:save",width:18}),children:y?"Saving...":g?"Save Changes":"Save Data"}),e.jsx(S,{color:"primary",variant:"flat",onPress:I,startContent:e.jsx(u,{icon:"lucide:download",width:18}),children:"Export Data"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(S,{color:"primary",variant:"flat",as:"span",startContent:e.jsx(u,{icon:"lucide:upload",width:18}),children:"Import Data"}),e.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:G})]})]})]}),e.jsx(z,{className:"p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Switch to Stepper ID:"}),e.jsx("input",{type:"number",min:"1",className:"px-3 py-2 border rounded-md w-20",placeholder:"ID",onKeyDown:h=>{if(h.key==="Enter"){const b=parseInt(h.target.value);b>0&&T(b)}}}),e.jsx(S,{size:"sm",color:"primary",variant:"flat",onPress:()=>{const h=document.querySelector('input[type="number"]'),b=parseInt(h.value);b>0&&T(b)},children:"Switch"})]})}),e.jsx(z,{className:"p-0",children:e.jsxs(Ge,{"aria-label":"Data Builder Tabs",fullWidth:!0,classNames:{tabList:"gap-0"},children:[e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:18}),e.jsx("span",{children:"Product Groups"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-0.5 rounded-full",children:s.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Bt,{})})},"groups"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:18}),e.jsx("span",{children:"Product Ranges"}),e.jsx("span",{className:"text-xs bg-secondary-100 text-secondary-800 px-2 py-0.5 rounded-full",children:a.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(qt,{})})},"ranges"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:package",width:18}),e.jsx("span",{children:"Products"}),e.jsx("span",{className:"text-xs bg-success-100 text-success-800 px-2 py-0.5 rounded-full",children:t.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Ht,{})})},"products"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:link",width:18}),e.jsx("span",{children:"Relationships"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Kt,{})})},"relationships"),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:eye",width:18}),e.jsx("span",{children:"Data Preview"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Jt,{})})},"preview")]})})]})};function Zt(){const{productGroups:s,isLoading:a,error:t,clearError:r,initializeFromWindowData:i,loadData:n}=X();L.useEffect(()=>{window.urbanaAdmin&&s.length===0&&(console.log("App initializing from window data"),i())},[i,s.length]);const l=async()=>{try{r(),await n()}catch(c){console.error("Load failed:",c)}};return a?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(Rs,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product data..."})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"py-6 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Product Data Builder"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Create and manage product configuration data"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(S,{variant:"flat",color:"primary",startContent:e.jsx(u,{icon:"lucide:refresh-cw",width:18}),onPress:l,isLoading:a,children:"Refresh Data"})})]}),t&&e.jsx(pt,{color:"danger",variant:"flat",className:"mb-6",title:"Error",description:t,endContent:e.jsx(S,{variant:"light",color:"danger",size:"sm",onPress:r,children:"Dismiss"})}),e.jsx(Yt,{})]})})}ct.createRoot(document.getElementById("urbana-data-builder-root")).render(e.jsx(A.StrictMode,{children:e.jsxs(dt,{children:[e.jsx(ht,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(Zt,{})})]})}));
