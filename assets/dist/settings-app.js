import{t as be,b3 as Ne,b4 as we,b6 as ve,p as ye,V as Ce,r as a,b9 as Se,U as ke,$ as Pe,v as _e,L as Oe,c as D,w as X,N as Fe,aY as Ie,x as z,f as Ae,j as e,I as s,d as w,e as v,b as L,i as H,A as B,s as De,l as Te,z as Q,g as Re,aH as Ee}from"./iconify.js";import{m as ze,a as Ve,b as Le,d as $e,c as G,e as Me,u as Ge}from"./index.js";import{p as Ue,a as Y,c as I}from"./chunk-XVMALT6H.js";import{t as le,a as $}from"./chunk-ML27DD5T.js";import"./features-animation.js";var ne=be({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer touch-none tap-highlight-transparent select-none",wrapper:["px-1","relative","inline-flex","items-center","justify-start","shrink-0","overflow-hidden","bg-default-200","rounded-full",...we],thumb:["z-10","flex","items-center","justify-center","bg-white","shadow-small","rounded-full","origin-right","pointer-events-none"],hiddenInput:Ne,startContent:"z-0 absolute start-1.5 text-current",endContent:"z-0 absolute end-1.5 text-default-600",thumbIcon:"text-black",label:"relative text-foreground select-none ms-2"},variants:{color:{default:{wrapper:["group-data-[selected=true]:bg-default-400","group-data-[selected=true]:text-default-foreground"]},primary:{wrapper:["group-data-[selected=true]:bg-primary","group-data-[selected=true]:text-primary-foreground"]},secondary:{wrapper:["group-data-[selected=true]:bg-secondary","group-data-[selected=true]:text-secondary-foreground"]},success:{wrapper:["group-data-[selected=true]:bg-success","group-data-[selected=true]:text-success-foreground"]},warning:{wrapper:["group-data-[selected=true]:bg-warning","group-data-[selected=true]:text-warning-foreground"]},danger:{wrapper:["group-data-[selected=true]:bg-danger","data-[selected=true]:text-danger-foreground"]}},size:{sm:{wrapper:"w-10 h-6",thumb:["w-4 h-4 text-tiny","group-data-[selected=true]:ms-4"],endContent:"text-tiny",startContent:"text-tiny",label:"text-small"},md:{wrapper:"w-12 h-7",thumb:["w-5 h-5 text-small","group-data-[selected=true]:ms-5"],endContent:"text-small",startContent:"text-small",label:"text-medium"},lg:{wrapper:"w-14 h-8",thumb:["w-6 h-6 text-medium","group-data-[selected=true]:ms-6"],endContent:"text-medium",startContent:"text-medium",label:"text-large"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{wrapper:"transition-none",thumb:"transition-none"},false:{wrapper:"transition-background",thumb:"transition-all",startContent:["opacity-0","scale-50","transition-transform-opacity","group-data-[selected=true]:scale-100","group-data-[selected=true]:opacity-100"],endContent:["opacity-100","transition-transform-opacity","group-data-[selected=true]:translate-x-3","group-data-[selected=true]:opacity-0"]}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!1,size:"sm",class:{thumb:["group-data-[pressed=true]:w-5","group-data-[selected]:group-data-[pressed]:ml-3"]}},{disableAnimation:!1,size:"md",class:{thumb:["group-data-[pressed=true]:w-6","group-data-[selected]:group-data-[pressed]:ml-4"]}},{disableAnimation:!1,size:"lg",class:{thumb:["group-data-[pressed=true]:w-7","group-data-[selected]:group-data-[pressed]:ml-5"]}}]});function We(i,f,t){let{labelProps:b,inputProps:o,isSelected:x,isPressed:l,isDisabled:N,isReadOnly:h}=ve(i,f,t);return{labelProps:b,inputProps:{...o,role:"switch",checked:x},isSelected:x,isPressed:l,isDisabled:N,isReadOnly:h}}function Be(i={}){var f,t;const b=ye(),[o,x]=Ce(i,ne.variantKeys),{ref:l,as:N,name:h,value:y="",isReadOnly:P=!1,autoFocus:c=!1,startContent:n,endContent:m,defaultSelected:p,isSelected:k,children:j,thumbIcon:T,className:V,classNames:r,onChange:q,onValueChange:U,...g}=o,u=N||"label",C=a.useRef(null),O=a.useRef(null),R=(t=(f=i.disableAnimation)!=null?f:b==null?void 0:b.disableAnimation)!=null?t:!1,A=a.useId(),_=a.useMemo(()=>{const d=g["aria-label"]||typeof j=="string"?j:void 0;return{name:h,value:y,children:j,autoFocus:c,defaultSelected:p,isSelected:k,isDisabled:!!i.isDisabled,isReadOnly:P,"aria-label":d,"aria-labelledby":g["aria-labelledby"]||A,onChange:U}},[y,h,A,j,c,P,k,p,i.isDisabled,g["aria-label"],g["aria-labelledby"],U]),M=Se(_);ke(()=>{if(!O.current)return;const d=!!O.current.checked;M.setSelected(d)},[O.current]);const{inputProps:F,isPressed:W,isReadOnly:Z}=We(_,M,O),{focusProps:re,isFocused:ee,isFocusVisible:se}=Pe({autoFocus:F.autoFocus}),{hoverProps:de,isHovered:te}=_e({isDisabled:F.disabled}),ae=_.isDisabled||Z?!1:W,E=F.checked,K=F.disabled,S=a.useMemo(()=>ne({...x,disableAnimation:R}),[Oe(x),R]),oe=D(r==null?void 0:r.base,V),ue=d=>({...X(de,g,d),ref:C,className:S.base({class:D(oe,d==null?void 0:d.className)}),"data-disabled":z(K),"data-selected":z(E),"data-readonly":z(Z),"data-focus":z(ee),"data-focus-visible":z(se),"data-hover":z(te),"data-pressed":z(ae)}),me=a.useCallback((d={})=>({...d,"aria-hidden":!0,className:D(S.wrapper({class:D(r==null?void 0:r.wrapper,d==null?void 0:d.className)}))}),[S,r==null?void 0:r.wrapper]),xe=(d={})=>({...X(F,re,d),ref:Ie(O,l),id:F.id,className:S.hiddenInput({class:r==null?void 0:r.hiddenInput}),onChange:Fe(q,F.onChange)}),he=a.useCallback((d={})=>({...d,className:S.thumb({class:D(r==null?void 0:r.thumb,d==null?void 0:d.className)})}),[S,r==null?void 0:r.thumb]),ge=a.useCallback((d={})=>({...d,id:A,className:S.label({class:D(r==null?void 0:r.label,d==null?void 0:d.className)})}),[S,r==null?void 0:r.label,K,E]),fe=a.useCallback((d={includeStateProps:!1})=>X({width:"1em",height:"1em",className:S.thumbIcon({class:D(r==null?void 0:r.thumbIcon)})},d.includeStateProps?{isSelected:E}:{}),[S,r==null?void 0:r.thumbIcon,E]),pe=a.useCallback((d={})=>({width:"1em",height:"1em",...d,className:S.startContent({class:D(r==null?void 0:r.startContent,d==null?void 0:d.className)})}),[S,r==null?void 0:r.startContent,E]),je=a.useCallback((d={})=>({width:"1em",height:"1em",...d,className:S.endContent({class:D(r==null?void 0:r.endContent,d==null?void 0:d.className)})}),[S,r==null?void 0:r.endContent,E]);return{Component:u,slots:S,classNames:r,domRef:C,children:j,thumbIcon:T,startContent:n,endContent:m,isHovered:te,isSelected:E,isPressed:ae,isFocused:ee,isFocusVisible:se,isDisabled:K,getBaseProps:ue,getWrapperProps:me,getInputProps:xe,getLabelProps:ge,getThumbProps:he,getThumbIconProps:fe,getStartContentProps:pe,getEndContentProps:je}}var ce=Ae((i,f)=>{const{Component:t,children:b,startContent:o,endContent:x,thumbIcon:l,getBaseProps:N,getInputProps:h,getWrapperProps:y,getThumbProps:P,getThumbIconProps:c,getLabelProps:n,getStartContentProps:m,getEndContentProps:p}=Be({...i,ref:f}),k=typeof l=="function"?l(c({includeStateProps:!0})):l&&a.cloneElement(l,c()),j=o&&a.cloneElement(o,m()),T=x&&a.cloneElement(x,p());return e.jsxs(t,{...N(),children:[e.jsx("input",{...h()}),e.jsxs("span",{...y(),children:[o&&j,e.jsx("span",{...P(),children:l&&k}),x&&T]}),b&&e.jsx("span",{...n(),children:b})]})});ce.displayName="HeroUI.Switch";var J=ce;const He=({isOpen:i,onOpenChange:f})=>{const[t,b]=a.useState(null),[o,x]=a.useState(!1),[l,N]=a.useState(!1),[h,y]=a.useState(!1),[P,c]=a.useState(null),[n,m]=a.useState(null),[p,k]=a.useState(""),j=a.useMemo(()=>{if(!n)return{categories:0,ranges:0,products:0,totalFiles:0,totalFolders:0};const{structured_data:g,total_folders:u,total_objects:C}=n,O=Object.keys(g).length;let R=0,A=0,_=0;return Object.values(g).forEach(M=>{R+=Object.keys(M).length,Object.values(M).forEach(F=>{A+=Object.keys(F).length,Object.values(F).forEach(W=>{_+=W.images.length+W.downloads.length})})}),{categories:O,ranges:R,products:A,totalFiles:_,totalFolders:u||0}},[n]);a.useEffect(()=>{i&&(T(),m(null),c(null))},[i]);const T=a.useCallback(async()=>{var g;x(!0);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((g=window.urbanaAdmin)==null?void 0:g.nonce)||""}});if(u.ok){const C=await u.json();b(C)}}catch(u){console.error("Failed to load config:",u)}finally{x(!1)}},[]),V=a.useCallback(async()=>{var g;N(!0),c(null);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/test-connection",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((g=window.urbanaAdmin)==null?void 0:g.nonce)||""}});if(u.ok){const C=await u.json();c(C)}else c({success:!1,message:"Connection test failed"})}catch(u){const C=u instanceof Error?u.message:"Unknown error occurred";c({success:!1,message:C})}finally{N(!1)}},[]),r=a.useCallback(async()=>{var g;y(!0),m(null);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/fetch-assets",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((g=window.urbanaAdmin)==null?void 0:g.nonce)||""},body:JSON.stringify({prefix:p})});if(u.ok){const C=await u.json();m(C)}else throw new Error(`Failed to fetch assets: ${u.status} ${u.statusText}`)}catch(u){const C=u instanceof Error?u.message:"Unknown error occurred";m({success:!1,message:C,total_folders:0,total_objects:0,raw_folders:[],raw_objects:[],structured_data:{},debug_info:{prefix:p||"",configuration:t||{bucket_name:"",region:"",endpoint:"",configured:!1},categories:[]}})}finally{y(!1)}},[p,t]),q=a.useCallback(()=>{m(null),c(null),y(!1),N(!1),f(!1)},[f]),U=g=>Object.entries(g).map(([u,C])=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-semibold text-lg text-primary mb-2 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder",width:16}),u]}),Object.entries(C).map(([O,R])=>e.jsxs("div",{className:"ml-4 mb-3",children:[e.jsxs("h5",{className:"font-medium text-secondary mb-1 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-open",width:14}),O]}),Object.entries(R).map(([A,_])=>e.jsxs("div",{className:"ml-4 mb-2",children:[e.jsxs("h6",{className:"font-medium text-success mb-1 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:package",width:12}),A]}),e.jsxs("div",{className:"ml-4 text-sm space-y-1",children:[_.images.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:image",width:12,className:"text-primary"}),e.jsxs("span",{children:["Images: ",_.images.length]}),e.jsx(G,{size:"sm",variant:"flat",color:"primary",children:_.images.length})]}),_.downloads.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:file",width:12,className:"text-secondary"}),e.jsxs("span",{children:["Downloads: ",_.downloads.length]}),e.jsx(G,{size:"sm",variant:"flat",color:"secondary",children:_.downloads.length})]})]})]},A))]},O))]},u));return e.jsx(ze,{isOpen:i,onOpenChange:f,size:"5xl",scrollBehavior:"inside",className:"urbana-modal",isDismissable:!h&&!l,children:e.jsx(Ve,{children:g=>e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:cloud-download",width:20}),"Fetch from Digital Ocean Spaces"]}),e.jsx("p",{className:"text-sm text-foreground-500 font-normal",children:"Browse and analyze assets stored in your Digital Ocean Spaces"})]}),e.jsx($e,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{className:t!=null&&t.configured?"border-success":"border-warning",children:e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:t!=null&&t.configured?"lucide:check-circle":"lucide:alert-circle",width:20,className:t!=null&&t.configured?"text-success":"text-warning"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Configuration Status"}),e.jsx("p",{className:"text-sm text-foreground-500",children:t!=null&&t.configured?"Digital Ocean Spaces is configured":"Configuration required"})]})]}),e.jsx(L,{color:"primary",variant:"flat",size:"sm",onPress:V,isLoading:l,isDisabled:!(t!=null&&t.configured)||l||h,startContent:l?void 0:e.jsx(s,{icon:"lucide:wifi",width:16}),children:l?"Testing...":"Test Connection"})]}),t&&e.jsxs("div",{className:"mt-3 text-sm text-foreground-600",children:[e.jsxs("div",{children:["Bucket: ",t.bucket_name||"Not set"]}),e.jsxs("div",{children:["Region: ",t.region||"Not set"]}),e.jsxs("div",{children:["Endpoint: ",t.endpoint||"Not set"]})]}),P&&e.jsx("div",{className:"mt-3",children:e.jsx(G,{size:"sm",variant:"flat",color:P.success?"success":"danger",startContent:e.jsx(s,{icon:P.success?"lucide:check":"lucide:x",width:12}),children:P.message})})]})}),e.jsx(w,{children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-2",children:[e.jsx(s,{icon:"lucide:settings",width:16}),"Fetch Options"]}),e.jsx(H,{label:"Prefix Filter (Optional)",placeholder:"e.g., shelter/ or shelter/peninsula/",value:p,onValueChange:k,description:"Filter objects by prefix to limit the search scope",startContent:e.jsx(s,{icon:"lucide:filter",width:16}),isDisabled:h,classNames:{input:"urbana-input"}})]})})}),h&&e.jsx(w,{className:"border-primary",children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:loader",width:16,className:"animate-spin text-primary"}),e.jsx("span",{className:"font-semibold",children:"Fetching Assets..."})]}),e.jsx(Ue,{isIndeterminate:!0,color:"primary",size:"sm",className:"w-full"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Please wait while we fetch assets from Digital Ocean Spaces..."})]})})}),n&&e.jsx(w,{className:n.success?"border-success":"border-danger",children:e.jsx(v,{children:e.jsxs(le,{"aria-label":"Fetch Results",children:[e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bar-chart",width:16}),"Summary"]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:n.success?"lucide:check-circle":"lucide:x-circle",width:16,className:n.success?"text-success":"text-danger"}),e.jsx("span",{className:"font-semibold",children:n.success?"Fetch Successful!":"Fetch Failed"})]}),e.jsx("p",{className:"text-sm",children:n.message}),n.success&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-center mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:j.categories}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Categories"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:j.ranges}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Ranges"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:j.products}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Products"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:j.totalFiles}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Files"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-danger",children:j.totalFolders}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Folders"})]})]})]})},"summary"),e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-tree",width:16}),"Structure"]}),children:e.jsx(B,{className:"max-h-96",children:e.jsx("div",{className:"text-sm",children:Object.keys(n.structured_data).length>0?U(n.structured_data):e.jsxs("div",{className:"text-center text-foreground-500 py-8",children:[e.jsx(s,{icon:"lucide:folder-x",width:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No structured data found"})]})})})},"structure"),e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bug",width:16}),"Debug"]}),children:e.jsx(B,{className:"max-h-96",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Configuration"}),e.jsx(Y,{className:"text-xs",children:JSON.stringify(n.debug_info.configuration,null,2)})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Folders Found"}),e.jsx(B,{className:"max-h-32",children:e.jsx(Y,{className:"text-xs",children:n.raw_folders.length>0?n.raw_folders.join(`
`):"No folders found"})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Fetch Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Prefix: ",n.debug_info.prefix||"(none)"]}),e.jsxs("div",{children:["Total Folders: ",n.total_folders]}),e.jsxs("div",{children:["Total Objects: ",n.total_objects]}),e.jsxs("div",{children:["Categories Found: ",n.debug_info.categories.join(", ")||"(none)"]})]})]}),n.raw_objects.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Sample Objects"}),e.jsx(B,{className:"max-h-32",children:e.jsx(Y,{className:"text-xs",children:JSON.stringify(n.raw_objects.slice(0,5),null,2)})})]})]})})},"debug")]})})})]})}),e.jsxs(Me,{children:[e.jsx(L,{variant:"light",onPress:q,isDisabled:h||l,children:n?"Close":"Cancel"}),!n&&e.jsx(L,{color:"primary",onPress:r,isLoading:h,isDisabled:!(t!=null&&t.configured)||h||l,startContent:h?void 0:e.jsx(s,{icon:"lucide:cloud-download",width:16}),children:h?"Fetching...":"Fetch Assets"})]})]})})})},qe=[{key:"nyc1",label:"New York 1"},{key:"nyc3",label:"New York 3"},{key:"ams3",label:"Amsterdam 3"},{key:"sgp1",label:"Singapore 1"},{key:"lon1",label:"London 1"},{key:"fra1",label:"Frankfurt 1"},{key:"tor1",label:"Toronto 1"},{key:"sfo3",label:"San Francisco 3"},{key:"blr1",label:"Bangalore 1"}],Ke=({settings:i,onChange:f})=>{const[t,b]=a.useState(!1),[o,x]=a.useState(null),{isOpen:l,onOpen:N,onOpenChange:h}=Ge(),y=a.useCallback((c,n)=>{f({[c]:n})},[f]),P=a.useCallback(async()=>{var c;b(!0),x(null);try{const n=await fetch("/wp-json/urbana/v1/digital-ocean/test-connection",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((c=window.urbanaAdmin)==null?void 0:c.nonce)||""}});if(n.ok){const m=await n.json();x(m)}else x({success:!1,message:"Failed to test connection"})}catch{x({success:!1,message:"Connection test failed"})}finally{b(!1)}},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Digital Ocean Spaces"}),e.jsx("p",{className:"text-foreground-500",children:"Configure your Digital Ocean Spaces for asset storage and management."})]}),o&&e.jsx(w,{className:`border ${o.success?"border-success":"border-danger"}`,children:e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:o.success?"lucide:check-circle":"lucide:x-circle",width:20,className:o.success?"text-success":"text-danger"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.success?"Connection Successful":"Connection Failed"}),e.jsx("p",{className:"text-sm text-foreground-500",children:o.message})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"h-fit",children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:settings",width:16}),"Configuration"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsx(H,{label:"Bucket Name",placeholder:"your-bucket-name",value:i.bucket_name,onValueChange:c=>y("bucket_name",c),startContent:e.jsx(s,{icon:"lucide:bucket",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(De,{label:"Region",placeholder:"Select a region",selectedKeys:i.region?[i.region]:[],onSelectionChange:c=>{const n=Array.from(c)[0];n&&y("region",n)},children:qe.map(c=>e.jsx(Te,{children:c.label},c.key))}),e.jsx(H,{label:"Access Key",placeholder:"Your access key",value:i.access_key,onValueChange:c=>y("access_key",c),startContent:e.jsx(s,{icon:"lucide:key",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(H,{label:"Secret Key",placeholder:"Your secret key",type:"password",value:i.secret_key,onValueChange:c=>y("secret_key",c),startContent:e.jsx(s,{icon:"lucide:eye-off",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(Q,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Configuration Status"}),e.jsx("p",{className:"text-sm text-foreground-500",children:i.configured?"Ready to use":"Configuration incomplete"})]}),e.jsx(G,{size:"sm",variant:"flat",color:i.configured?"success":"warning",startContent:e.jsx(s,{icon:i.configured?"lucide:check":"lucide:alert-circle",width:12}),children:i.configured?"Configured":"Setup Required"})]}),e.jsx(L,{color:"primary",variant:"flat",onPress:P,isLoading:t,isDisabled:!i.bucket_name||!i.access_key||!i.secret_key,startContent:t?void 0:e.jsx(s,{icon:"lucide:wifi",width:16}),className:"w-full",children:t?"Testing...":"Test Connection"}),e.jsx(L,{color:"secondary",variant:"flat",onPress:N,isDisabled:!i.configured,startContent:e.jsx(s,{icon:"lucide:cloud-download",width:16}),className:"w-full",children:"Browse Assets"})]})]}),e.jsxs(w,{className:"h-fit",children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:16}),"Setup Instructions"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Create a Space"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Go to your Digital Ocean dashboard and create a new Space"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Generate API Keys"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create API keys with read/write permissions for Spaces"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Configure Settings"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Enter your bucket name, region, and API credentials above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-success text-white text-xs flex items-center justify-center font-bold mt-0.5",children:e.jsx(s,{icon:"lucide:check",width:12})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Test Connection"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Use the test button to verify your configuration"})]})]})]}),e.jsx(Q,{}),e.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-warning-800",children:"Security Note"}),e.jsx("p",{className:"text-sm text-warning-700",children:"API keys are stored securely in your WordPress database. Never share these credentials."})]})]})})]})]})]}),e.jsx(He,{isOpen:l,onOpenChange:h}),e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-tree",width:16}),"Expected Folder Structure"]})}),e.jsxs(v,{children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-4",children:"Your Digital Ocean Space should follow this folder structure for optimal integration:"}),e.jsx("pre",{className:"px-2 py-1 h-fit font-mono font-normal bg-default/40 text-default-700 rounded-small text-xs overflow-x-auto",children:e.jsx("code",{children:`your-bucket-name/
├── shelter/
│   └── peninsula/
│       └── k302/
│           ├── images/
│           │   ├── hero.jpg
│           │   └── gallery-1.jpg
│           ├── downloads/
│           │   ├── spec.pdf
│           │   └── install.pdf
│           └── img_conf/
│               ├── Post Material/
│               │   ├── Pine.jpg
│               │   └── Concrete.jpg
│               ├── Seat Material/
│               │   ├── Recycled Plastic.jpg
│               │   └── Thermoplastic.jpg
│               └── Finish/
│                   ├── Galvanized.jpg
│                   └── Powder Coated.jpg
│               
├── seating/
│   └── bench/
│       └── b100/
│           ├── images/
│           └── downloads/
└── ...`})}),e.jsxs("div",{className:"mt-4 text-sm text-foreground-500 space-y-2",children:[e.jsx("p",{children:"• Category folders (e.g., shelter, seating, bridge)"}),e.jsx("p",{children:"• Range folders (e.g., peninsula, bench, decorative)"}),e.jsx("p",{children:"• Product code folders (e.g., k302, b100)"}),e.jsx("p",{children:"• Asset type folders: images/ and downloads/"})]})]})]})]})},Xe=({settings:i,onChange:f})=>{var b,o,x;const t=a.useCallback((l,N)=>{f({[l]:N})},[f]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"General Settings"}),e.jsx("p",{className:"text-foreground-500",children:"Configure general plugin behavior and preferences."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bell",width:16}),"Notifications"]})}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Receive email notifications for new form submissions"})]}),e.jsx(J,{isSelected:i.email_notifications,onValueChange:l=>t("email_notifications",l),color:"primary"})]})})]}),e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:save",width:16}),"Data Management"]})}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto Save"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Automatically save changes as you work"})]}),e.jsx(J,{isSelected:i.auto_save,onValueChange:l=>t("auto_save",l),color:"primary"})]})})]}),e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bug",width:16}),"Development"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Debug Mode"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Enable debug logging and additional developer information"})]}),e.jsx(J,{isSelected:i.debug_mode,onValueChange:l=>t("debug_mode",l),color:"warning"})]}),i.debug_mode&&e.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-warning-800",children:"Debug Mode Active"}),e.jsx("p",{className:"text-sm text-warning-700",children:"Additional logging is enabled. Disable in production for better performance."})]})]})})]})]}),e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:16}),"Additional Options"]})}),e.jsxs(v,{children:[e.jsx("p",{className:"text-sm text-foreground-500 mb-4",children:"More configuration options will be available in future updates."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Database optimization"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Performance monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Advanced caching options"})]})]})]})]})]}),e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:server",width:16}),"System Information"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"WordPress Version"}),e.jsx("p",{className:"text-foreground-500",children:((b=window.urbanaAdmin)==null?void 0:b.wpVersion)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"PHP Version"}),e.jsx("p",{className:"text-foreground-500",children:((o=window.urbanaAdmin)==null?void 0:o.phpVersion)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"Plugin Version"}),e.jsx("p",{className:"text-foreground-500",children:((x=window.urbanaAdmin)==null?void 0:x.pluginVersion)||"1.0.0"})]})]})})]})]})},Ye=()=>{const[i,f]=a.useState(!0),[t,b]=a.useState(!1),[o,x]=a.useState({digitalOcean:{bucket_name:"",region:"nyc3",access_key:"",secret_key:"",configured:!1},general:{email_notifications:!0,auto_save:!0,debug_mode:!1}}),[l,N]=a.useState(!1),[h,y]=a.useState(null);a.useEffect(()=>{P()},[]);const P=a.useCallback(async()=>{var m;f(!0);try{const p=await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((m=window.urbanaAdmin)==null?void 0:m.nonce)||""}});if(p.ok){const k=await p.json();x(j=>({...j,digitalOcean:{...j.digitalOcean,...k}}))}}catch(p){console.error("Failed to load settings:",p)}finally{f(!1)}},[]),c=a.useCallback((m,p)=>{x(k=>({...k,[m]:{...k[m],...p}})),N(!0)},[]),n=a.useCallback(async()=>{var m,p,k,j,T;b(!0);try{if(!(await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((m=window.urbanaAdmin)==null?void 0:m.nonce)||""},body:JSON.stringify(o.digitalOcean)})).ok)throw new Error("Failed to save Digital Ocean settings");N(!1),y(new Date),(k=(p=window.wp)==null?void 0:p.data)!=null&&k.dispatch("core/notices")&&window.wp.data.dispatch("core/notices").createSuccessNotice("Settings saved successfully!")}catch(V){console.error("Failed to save settings:",V),(T=(j=window.wp)==null?void 0:j.data)!=null&&T.dispatch("core/notices")&&window.wp.data.dispatch("core/notices").createErrorNotice("Failed to save settings. Please try again.")}finally{b(!1)}},[o]);return i?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Re,{size:"lg",color:"primary"}),e.jsx("p",{className:"text-foreground-500",children:"Loading settings..."})]})}):e.jsxs("div",{className:"urbana-settings-page max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Settings"}),e.jsx("p",{className:"text-foreground-500",children:"Configure your Urbana Selector plugin settings"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[h&&e.jsxs("div",{className:"text-sm text-foreground-500 text-right",children:[e.jsx("div",{className:"text-xs",children:"Last saved:"}),e.jsx("div",{className:"font-medium",children:h.toLocaleString()})]}),e.jsx(L,{color:l?"primary":"success",variant:l?"solid":"flat",onPress:n,isLoading:t,isDisabled:t||!l,startContent:t?void 0:e.jsx(s,{icon:"lucide:save",width:18}),size:"lg",children:t?"Saving...":l?"Save Changes":"Saved"})]})]}),e.jsx(w,{className:"overflow-visible",children:e.jsx(v,{className:"p-0",children:e.jsxs(le,{"aria-label":"Settings",variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-6 h-12",tabContent:"group-data-[selected=true]:text-primary"},children:[e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:cloud",width:18}),e.jsx("span",{children:"Digital Ocean"}),e.jsx(G,{size:"sm",variant:"flat",color:o.digitalOcean.configured?"success":"warning",children:o.digitalOcean.configured?"Configured":"Setup Required"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Ke,{settings:o.digitalOcean,onChange:m=>c("digitalOcean",m)})})},"digital-ocean"),e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:settings",width:18}),e.jsx("span",{children:"General"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Xe,{settings:o.general,onChange:m=>c("general",m)})})},"general"),e.jsx($,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:18}),e.jsx("span",{children:"About"})]}),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Urbana Selector Plugin"}),e.jsx("p",{className:"text-foreground-600 mb-4",children:"A comprehensive product configuration system for Urbana products with advanced data management capabilities."})]}),e.jsx(Q,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"border",children:[e.jsx(I,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:package",width:16}),"Features"]})}),e.jsx(v,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Product data management"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Digital Ocean Spaces integration"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Asset folder generation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Customer order management"]})]})})]}),e.jsxs(w,{className:"border",children:[e.jsx(I,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:code",width:16}),"Tech Stack"]})}),e.jsx(v,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"React 18+ with TypeScript"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"HeroUI component library"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"PHP 8.1+ backend"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"WordPress REST API"]})]})})]})]})]})})},"about")]})})})]})},Je=()=>e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsx(Ye,{})}),ie=document.getElementById("urbana-settings-root");ie&&Ee.createRoot(ie).render(e.jsx(Je,{}));
