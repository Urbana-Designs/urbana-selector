import{f as T,u as z,a as B,c as W,j as e,b as P,I as h,R as S,d as j,e as b,r as D,s as U,l as H,i as C,g as q,h as V}from"./iconify.js";import{m as x}from"./proxy.js";import{i as k,b as K,a as Y,c as R,p as F,d as O,T as Q}from"./productData.js";import{t as $,a as w}from"./chunk-ML27DD5T.js";import{t as J,c as X,a as Z,d as ee,p as te,H as se}from"./middleware.js";import"./features-animation.js";var _=T((a,i)=>{var t;const{as:l,className:o,children:c,...s}=a,n=l||"div",r=z(i),{slots:u,classNames:m}=B(),f=W(m==null?void 0:m.footer,o);return e.jsx(n,{ref:r,className:(t=u.footer)==null?void 0:t.call(u,{class:f}),...s,children:c})});_.displayName="HeroUI.CardFooter";var ae=_;const ie=({currentStep:a,totalSteps:i,onNext:t,onPrevious:l,canProceed:o,isLastStep:c,isSubmitting:s,isSubmitted:n,onSubmit:r})=>e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("div",{children:a>1&&e.jsx(P,{variant:"flat",color:"default",onPress:l,startContent:e.jsx(h,{icon:"lucide:arrow-left",width:18}),children:"Previous"})}),e.jsxs("div",{className:"text-default-500 text-sm",children:["Step ",a," of ",i]}),e.jsx("div",{children:c?e.jsx(P,{color:"primary",isDisabled:!o||s||n,isLoading:s,onPress:r,endContent:!s&&!n&&e.jsx(h,{icon:"lucide:send",width:18}),children:n?e.jsxs(x.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2",children:[e.jsx(h,{icon:"lucide:check",width:18}),"Submitted"]}):"Submit"}):e.jsx(P,{color:"primary",isDisabled:!o,onPress:t,endContent:e.jsx(h,{icon:"lucide:arrow-right",width:18}),children:"Next"})})]}),re=({currentStep:a,totalSteps:i,steps:t,selections:l,onStepClick:o})=>{const c=s=>s===1?!0:s===2?!!l.productGroup:s===3?!!l.productRange:s===4||s===5||s===6?!!l.individualProduct:!1;return e.jsx("div",{className:"hidden md:block mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:t.map(s=>{const n=s.step===a,r=s.step<a,u=c(s.step);return e.jsxs(S.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("button",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${n?"bg-primary text-white":r?"bg-success text-white":"bg-default-100 text-default-500"} ${u?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-60"}`,onClick:()=>u&&o(s.step),disabled:!u,"aria-label":`Go to step ${s.step}: ${s.title}`,children:r?e.jsx(h,{icon:"lucide:check",width:20}):e.jsx("span",{children:s.step})}),e.jsx("span",{className:`text-xs mt-2 text-center max-w-[80px] ${n?"text-primary font-medium":"text-default-500"}`,children:s.title})]}),s.step<i&&e.jsx("div",{className:"flex-1 h-[2px] mx-2 bg-default-200",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:r?"100%":"0%"}})})]},s.step)})})})},ne=({data:a,selection:i,onSelect:t})=>{const l=s=>{if(console.log("data.productGroups",a.productGroups),a.productGroups){const n=a.productGroups.find(r=>r.name===s);if(console.log("foundGroup",n),n)return n}return{id:s.toLowerCase().replace(/\s+/g,"-"),name:s,icon:le(s),description:ce(s)}},o={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsx("p",{className:"text-default-600 mb-6",children:"Please select a product category to begin your configuration."}),e.jsx(x.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:o,initial:"hidden",animate:"show",children:a.categories.map(s=>{const n=l(s);return e.jsx(x.div,{variants:c,children:e.jsx(j,{isPressable:!0,onPress:()=>t(s),className:`transition-all duration-200 ${i===s?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsxs(b,{className:"flex flex-col items-center text-center p-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${i===s?"bg-primary text-white":"bg-default-100 text-default-500"}`,children:e.jsx(h,{icon:n.icon,width:24})}),e.jsx("h3",{className:"text-lg font-medium",children:s}),e.jsx("p",{className:"text-default-500 text-sm mt-1",children:n.description})]})})},s)})})]})};function le(a){return{Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"}[a]||"lucide:box"}function ce(a){return{Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"}[a]||"Product category"}const oe=({data:a,productGroup:i,selection:t,onSelect:l})=>{const o=a.ranges[i]||[],c=r=>{if(a.productRanges){const u=a.productRanges.find(m=>m.name===r);if(u)return u}return{id:r.toLowerCase().replace(/\s+/g,"-"),name:r,image:"",description:ue(r,i),tags:me(r)}},s={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a product range from the ",i," category:"]}),e.jsx(x.div,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",variants:s,initial:"hidden",animate:"show",children:o.map((r,u)=>{const m=c(r),f=m.image||`https://img.heroui.chat/image/${de(i)}?w=300&h=300&u=${i}_${u}`;return e.jsx(x.div,{variants:n,children:e.jsx(j,{isPressable:!0,onPress:()=>l(r),className:`transition-all duration-200 ${t===r?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsx(b,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsx("div",{className:"w-full sm:w-1/3 h-40",children:e.jsx(k,{removeWrapper:!0,alt:`${r} product range`,className:"w-full h-full object-cover",src:f})}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:r}),e.jsx("p",{className:"text-default-500 text-sm mt-2",children:m.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:m.tags.map(v=>e.jsx("span",{className:"text-xs px-2 py-1 bg-default-100 text-default-700 rounded-medium",children:v},v))})]})]})})})},r)})})]})};function de(a){return{Shelter:"landscape",Toilet:"places",Bridge:"landscape",Access:"places",Seating:"furniture",Lighting:"places"}[a]||"places"}function ue(a,i){return{Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas","Decorative Bridge":"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles",Ramp:"Gentle slope access solutions for wheelchairs and strollers",Staircase:"Step access with various configurations and safety features",Pathway:"Connected walkway systems for parks and public spaces",Boardwalk:"Elevated walkways for wetlands and sensitive environments",Platform:"Viewing platforms and elevated observation areas",Bench:"Traditional seating options for parks and public spaces","Table Setting":"Combined table and seating arrangements for picnic areas",Lounge:"Comfortable extended seating for relaxation areas",Stadium:"Tiered seating solutions for sports and event venues",Custom:"Bespoke seating arrangements designed to specification",Solar:"Self-sufficient lighting powered by renewable energy","Mains Powered":"Connected lighting solutions with reliable performance","Decorative Light":"Aesthetic lighting features that enhance landscapes",Security:"High visibility lighting for safety and security","Pathway Light":"Directional lighting for walkways and pedestrian areas"}[a]||`${a} product range for ${i}`}function me(a,i){const t={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return t[a]||t.default}const pe=({data:a,productRange:i,selection:t,onSelect:l})=>{const o=a.products[i]||[],c=r=>{if(a.productsData&&Array.isArray(a.productsData)){const u=a.productsData.find(m=>m.code===r);if(u)return u}return{id:r.toLowerCase(),code:r,name:`${r} Product`,overview:A(r),description:A(r),specifications:[],imageGallery:[],files:{}}},s={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},n={hidden:{opacity:0,y:10},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a specific product from the ",i," range:"]}),e.jsx(x.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:s,initial:"hidden",animate:"show",children:o.map(r=>{const u=t===r,m=c(r),f=he(r);return e.jsx(x.div,{variants:n,children:e.jsxs(j,{isPressable:!0,onPress:()=>l(r),className:`h-full transition-all duration-200 ${u?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:[e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:m.name||r}),u&&e.jsx(K,{color:"primary",variant:"flat",children:"Selected"})]}),e.jsx("p",{className:"text-default-500 text-sm",children:m.overview||m.description})]}),e.jsx(ae,{className:"border-t border-default-100 gap-2 flex-wrap",children:f.map(v=>e.jsxs("div",{className:"flex items-center text-xs text-default-600",children:[e.jsx(h,{icon:v.icon,className:"mr-1",width:14}),e.jsx("span",{children:v.name})]},v.name))})]})},r)})})]})};function A(a){const i=a.match(/[A-Z]+\d+/),t=i?i[0]:a;return{K301:"Compact shelter with modern design, suitable for parks and urban settings.",K302:"Medium-sized shelter with extended roof coverage for picnic areas.",K308:"Large shelter with multiple seating options and enhanced weather protection.",K310:"Premium shelter with architectural design elements and superior materials.",K315:"Deluxe shelter with integrated seating and optional power connections.",E201:"Eco-friendly toilet with composting technology and minimal water usage.",E202:"Solar-powered toilet facility with self-contained waste management.",SS101:"Small pedestrian bridge for garden paths and decorative water crossings.",SS102:"Compact bridge with enhanced load capacity for light maintenance vehicles.",R101:"ADA compliant access ramp with gentle slope and non-slip surface.",R102:"Modular ramp system adaptable to various height requirements."}[t]||`${a} model with standard features and customization options.`}function he(a){const i=a.charAt(0),t={K:[{name:"Weather Resistant",icon:"lucide:cloud-rain"},{name:"UV Protection",icon:"lucide:sun"},{name:"Seating Options",icon:"lucide:armchair"}],W:[{name:"Wind Resistant",icon:"lucide:wind"},{name:"Corrosion Proof",icon:"lucide:shield"},{name:"Heavy Duty",icon:"lucide:hammer"}],E:[{name:"Eco-Friendly",icon:"lucide:leaf"},{name:"Low Maintenance",icon:"lucide:settings-2"},{name:"Odor Control",icon:"lucide:fan"}],S:[{name:"Standard Compliant",icon:"lucide:check-circle"},{name:"Easy Clean",icon:"lucide:sparkles"},{name:"Vandal Resistant",icon:"lucide:shield"}],R:[{name:"ADA Compliant",icon:"lucide:wheelchair"},{name:"Non-Slip Surface",icon:"lucide:footprints"},{name:"Handrails",icon:"lucide:grip-horizontal"}],default:[{name:"Customizable",icon:"lucide:settings"},{name:"Quality Materials",icon:"lucide:badge-check"},{name:"Warranty",icon:"lucide:shield"}]};return t[i]||t.default}const xe=({data:a,productId:i})=>{const t=a.productDetails[i],l=D.useCallback(async(s,n)=>{try{const r=s.includes("digitaloceanspaces.com");let u=s;if(r){const f=new URL("/wp-json/urbana/v1/proxy-download",window.location.origin);f.searchParams.set("url",s),u=f.toString()}const m=document.createElement("a");m.href=u,m.download=n,m.style.display="none",m.target="_blank",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(r){console.error("Download failed:",r),alert("Failed to download file. Please try again or contact support.")}},[]);if(!t)return e.jsxs("div",{className:"text-center p-8",children:[e.jsx(h,{icon:"lucide:file-question",className:"mx-auto mb-4 text-default-400",width:48}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Product Information Unavailable"}),e.jsxs("p",{className:"text-default-500",children:["Detailed information for ",i," is not available at this time. Please continue to the next step or contact our support team for assistance."]})]});const o={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}},c=t.imageGallery.length>0?t.imageGallery[0]:"";return e.jsxs(x.div,{className:"space-y-8",initial:"hidden",animate:"show",variants:o,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(k,{removeWrapper:!0,alt:t.name,className:"w-full h-64 object-cover rounded-medium",src:c||`https://img.heroui.chat/image/${fe(i)}`})}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),e.jsx("p",{className:"text-default-600 mb-4",children:t.overview}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{icon:"lucide:check-circle",className:"text-success",width:20}),e.jsx("span",{children:"In Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{icon:"lucide:truck",className:"text-default-500",width:20}),e.jsx("span",{children:"Standard Delivery: 2-4 weeks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{icon:"lucide:shield",className:"text-default-500",width:20}),e.jsx("span",{children:"10 Year Warranty"})]})]})]})]}),e.jsxs($,{"aria-label":"Product information tabs",variant:"underlined",color:"primary",children:[e.jsx(w,{title:"Details",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-default-700",children:t.description}),e.jsx("h4",{className:"text-lg font-medium mt-6 mb-3",children:"Specifications"}),e.jsx("ul",{className:"space-y-2",children:t.specifications.map((s,n)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(h,{icon:"lucide:chevron-right",className:"text-primary mt-1 flex-shrink-0",width:16}),e.jsx("span",{children:s})]},n))})]})})})},"details"),e.jsx(w,{title:"Image Gallery",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.imageGallery.map((s,n)=>e.jsx("div",{className:"aspect-square",children:e.jsx(k,{removeWrapper:!0,alt:`${t.name} - Image ${n+1}`,className:"w-full h-full object-cover rounded-medium",src:`${s}`})},n))})})})},"gallery"),e.jsx(w,{title:"Downloads",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-default-600 mb-4",children:"Download product documentation and technical files:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.files).map(([s,n])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-default-200 rounded-medium hover:border-primary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-default-100 rounded-medium",children:e.jsx(h,{icon:ge(n),className:"text-default-600",width:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s}),e.jsx("p",{className:"text-xs text-default-500",children:je(n)})]})]}),e.jsx(P,{size:"sm",variant:"flat",color:"primary",onPress:()=>l(n,be(n,s)),endContent:e.jsx(h,{icon:"lucide:download",width:16}),children:"Download"})]},n))})]})})})},"files"),e.jsx(w,{title:"FAQ",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs(Y,{children:[e.jsx(R,{title:"What is the installation process?",children:"Installation typically requires a concrete foundation and can be completed by our certified installers. The process usually takes 1-3 days depending on the product complexity and site conditions."},"1"),e.jsx(R,{title:"What maintenance is required?",children:"Our products are designed for minimal maintenance. We recommend a visual inspection every 6 months and cleaning as needed. Specific maintenance schedules are provided in the product documentation."},"2"),e.jsx(R,{title:"Are customizations available?",children:"Yes, most products can be customized with different colors, materials, and additional features. Custom options can be selected in the next step of this configuration process."},"3"),e.jsx(R,{title:"What warranty is provided?",children:"Standard warranty is 10 years on structural components and 5 years on other elements. Extended warranties are available for purchase. All warranties cover manufacturing defects and normal wear."},"4")]})})})},"faq")]})]})};function fe(a){const i=a.charAt(0);return{K:"landscape",W:"landscape",C:"landscape",U:"landscape",H:"landscape",E:"places",S:"places",A:"places",P:"places",SS:"landscape",LS:"landscape",R:"places",ST:"places",B:"furniture",TS:"furniture",SL:"places",MP:"places"}[i]||"places"}function ge(a){var l;const i=(l=a.split(".").pop())==null?void 0:l.toLowerCase(),t={pdf:"lucide:file-text",dwg:"lucide:file-cog",rvt:"lucide:file-3d",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",zip:"lucide:file-archive",default:"lucide:file"};return t[i||""]||t.default}function je(a){var l;const i=(l=a.split(".").pop())==null?void 0:l.toLowerCase(),t={pdf:"2.4 MB",dwg:"5.8 MB",rvt:"12.6 MB",doc:"1.2 MB",docx:"1.5 MB",xls:"3.1 MB",xlsx:"3.4 MB",zip:"8.7 MB",default:"1.0 MB"};return t[i||""]||t.default}function be(a,i){var l;try{const o=a.split("/"),c=o[o.length-1];if(c&&c.includes("."))return decodeURIComponent(c)}catch(o){console.error("Error extracting filename from URL:",o)}const t=(l=a.split(".").pop())==null?void 0:l.toLowerCase();return t&&!i.includes(".")?`${i}.${t}`:i}const ve=({data:a,options:i,onOptionsChange:t})=>{const l=(s,n)=>{t({...i,[s]:n})},o=S.useMemo(()=>{const s=Object.values(i).join("_"),n=s.length>0?s.split("").reduce((r,u)=>(r=(r<<5)-r+u.charCodeAt(0),r&r),0):0;return`https://img.heroui.chat/image/landscape?w=800&h=600&u=preview_${Math.abs(n)}`},[i]),c={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}};return e.jsxs(x.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:c,children:[e.jsx("p",{className:"text-default-600 mb-4",children:"Customize your product by selecting from the available options below:"}),e.jsxs($,{"aria-label":"Product configuration tabs",variant:"underlined",color:"primary",children:[e.jsx(w,{title:"Configuration Options",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(a.options).map(([s,n])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:s}),e.jsx(U,{label:s,placeholder:`Select ${s}`,selectedKeys:i[s]?[i[s]]:[],onChange:r=>{const u=r.target.value;l(s,u)},className:"max-w-full",children:n.map(r=>e.jsx(H,{children:r},r))})]},s))}),e.jsx("div",{children:e.jsxs("div",{className:"border border-default-200 rounded-medium p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview"}),e.jsx("div",{className:"aspect-video mb-4",children:e.jsx(k,{removeWrapper:!0,alt:"Product preview with selected options",className:"w-full h-full object-cover rounded-medium",src:o})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-medium text-default-500",children:"Selected Options:"}),Object.keys(i).length>0?e.jsx("ul",{className:"text-sm space-y-1",children:Object.entries(i).map(([s,n])=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{icon:"lucide:check",className:"text-success",width:14}),e.jsxs("span",{className:"font-medium",children:[s,":"]})," ",n]},s))}):e.jsx("p",{className:"text-sm text-default-500",children:"No options selected yet. Choose from the available options."})]})]})})]})})})},"options"),e.jsx(w,{title:"Option Impact",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"How Options Affect Your Product"}),e.jsx("p",{className:"text-default-600",children:"Different options can impact the appearance, durability, and functionality of your product. Below is a summary of how each option affects your selection."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-default-200 pb-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Post Material"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Pine"}),e.jsx("div",{className:"text-sm text-default-500",children:"Cost-effective, treated for outdoor use, 7-10 year lifespan"})]}),e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Hardwood"}),e.jsx("div",{className:"text-sm text-default-500",children:"Premium appearance, naturally durable, 15-20 year lifespan"})]}),e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Steel"}),e.jsx("div",{className:"text-sm text-default-500",children:"Maximum durability, galvanized finish, 25+ year lifespan"})]})]})]}),e.jsxs("div",{className:"border-b border-default-200 pb-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Roof Option"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Colorbond"}),e.jsx("div",{className:"text-sm text-default-500",children:"Standard metal roofing, multiple colors available, good durability"})]}),e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Ultra Grade"}),e.jsx("div",{className:"text-sm text-default-500",children:"Premium finish with enhanced UV protection and longer warranty"})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Screen"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"Rebated Front"}),e.jsx("div",{className:"text-sm text-default-500",children:"Partial screen on front side for privacy while maintaining airflow"})]}),e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[e.jsx("div",{className:"font-medium",children:"None"}),e.jsx("div",{className:"text-sm text-default-500",children:"Open design with maximum visibility and airflow"})]})]})]})]})]})})})},"impact"),e.jsx(w,{title:"Pricing Impact",children:e.jsx(j,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Option Pricing"}),e.jsx("p",{className:"text-default-600",children:"Different configuration options affect the final price of your product. Below is a breakdown of how each selection impacts pricing."})]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-default-200",children:[e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Option"}),e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Selection"}),e.jsx("th",{className:"py-2 px-4 text-right font-medium",children:"Price Impact"})]})}),e.jsx("tbody",{children:Object.entries(a.options).map(([s,n])=>e.jsx(S.Fragment,{children:n.map((r,u)=>e.jsxs("tr",{className:"border-b border-default-100",children:[u===0?e.jsx("td",{className:"py-2 px-4 align-top",rowSpan:n.length,children:s}):null,e.jsxs("td",{className:"py-2 px-4",children:[r,u===0&&e.jsx("span",{className:"text-xs text-default-400 ml-2",children:"(Standard)"})]}),e.jsx("td",{className:"py-2 px-4 text-right",children:u===0?"Included":`+$${(u*250+Math.random()*100).toFixed(0)}`})]},`${s}-${r}`))},s))})]}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium",children:e.jsxs("p",{className:"text-sm text-default-600",children:[e.jsx(h,{icon:"lucide:info",className:"inline-block mr-2",width:16}),"For exact pricing including all options and installation, please complete the form in the next step and our team will provide a detailed quote."]})})]})})})},"pricing")]})]})},ye=({data:a,contactInfo:i,onContactInfoChange:t,isSubmitting:l,isSubmitted:o,onSubmit:c})=>{const[s,n]=S.useState(!1),[r,u]=S.useState({}),m=(p,I)=>{t({...i,[p]:I}),r[p]&&u({...r,[p]:""})},f=()=>{const p={};return i.fullName.trim()||(p.fullName="Full name is required"),i.email.trim()?/^\S+@\S+\.\S+$/.test(i.email)||(p.email="Please enter a valid email address"):p.email="Email is required",s||(p.terms="You must accept the terms and conditions"),u(p),Object.keys(p).length===0},v=()=>{f()&&c()},E={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},y={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return o?e.jsxs(x.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(h,{icon:"lucide:check",className:"text-success",width:32})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-default-600 max-w-md mx-auto mb-6",children:"Your product configuration has been submitted successfully. Our team will review your selections and contact you shortly with pricing and next steps."})]}):e.jsxs(x.div,{className:"space-y-6",variants:E,initial:"hidden",animate:"show",children:[e.jsx(x.p,{variants:y,className:"text-default-600",children:"Please provide your contact information to receive a detailed quote for your configured product."}),e.jsxs(x.div,{variants:y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(C,{label:"Full Name",placeholder:"Enter your full name",value:i.fullName,onValueChange:p=>m("fullName",p),isRequired:!0,isInvalid:!!r.fullName,errorMessage:r.fullName}),e.jsx(C,{label:"Email Address",placeholder:"Enter your email address",type:"email",value:i.email,onValueChange:p=>m("email",p),isRequired:!0,isInvalid:!!r.email,errorMessage:r.email})]}),e.jsxs(x.div,{variants:y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(C,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:i.phone,onValueChange:p=>m("phone",p)}),e.jsx(C,{label:"Company/Organization",placeholder:"Enter your company or organization",value:i.company,onValueChange:p=>m("company",p)})]}),e.jsx(x.div,{variants:y,children:e.jsx(J,{label:"Additional Notes",placeholder:"Enter any specific requirements or questions",value:i.message,onValueChange:p=>m("message",p),minRows:3})}),e.jsxs(x.div,{variants:y,className:"space-y-4",children:[e.jsx(X,{isSelected:s,onValueChange:n,isInvalid:!!r.terms,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"I agree to the Terms and Conditions and Privacy Policy"}),r.terms&&e.jsx("span",{className:"text-danger text-xs mt-1",children:r.terms})]})}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium text-sm text-default-600",children:e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(h,{icon:"lucide:shield",className:"text-default-500 mt-0.5 flex-shrink-0",width:16}),e.jsx("span",{children:"Your information is secure and will only be used to process your product inquiry. We will never share your details with third parties without your consent."})]})})]}),e.jsx(x.div,{variants:y,className:"pt-4",children:e.jsx(P,{color:"primary",size:"lg",className:"w-full md:w-auto",isDisabled:l,isLoading:l,onPress:v,endContent:!l&&e.jsx(h,{icon:"lucide:send",width:18}),children:"Submit Configuration"})})]})},M={productGroup:null,productRange:null,individualProduct:null,options:{},contactInfo:{fullName:"",email:"",phone:"",company:"",message:""}},N=Z()(ee(te((a,i)=>({productData:null,currentStep:1,selections:M,isSubmitting:!1,isSubmitted:!1,initializeProductData:()=>{const t=window.urbanaPublic;t!=null&&t.productData?(console.log("Initializing stepper with database product data"),a({productData:t.productData})):console.warn("No database product data found in window.urbanaPublic")},setProductData:t=>{a({productData:t})},setCurrentStep:t=>a({currentStep:t}),updateSelection:(t,l)=>a(o=>{const c={...o.selections};return t==="productGroup"?(c.productGroup=l,c.productRange=null,c.individualProduct=null):t==="productRange"?(c.productRange=l,c.individualProduct=null):t==="options"?c.options={...c.options,...l}:t==="contactInfo"?c.contactInfo={...c.contactInfo,...l}:c[t]=l,{selections:c}}),nextStep:()=>a(t=>({currentStep:Math.min(t.currentStep+1,6)})),previousStep:()=>a(t=>({currentStep:Math.max(t.currentStep-1,1)})),goToStep:t=>{var s,n;const{selections:l,productData:o}=i(),c=((n=(s=o==null?void 0:o.stepperForm)==null?void 0:s.steps)==null?void 0:n.length)||6;return t<1||t>c?!1:t===1||t===2&&l.productGroup||t===3&&l.productRange||t>=4&&l.individualProduct?(a({currentStep:t}),!0):!1},setSubmitting:t=>a({isSubmitting:t}),setSubmitted:t=>a({isSubmitted:t}),resetStepper:()=>a({currentStep:1,selections:M,isSubmitting:!1,isSubmitted:!1}),canProceedToStep:t=>{var s,n;const{selections:l,productData:o}=i(),c=((n=(s=o==null?void 0:o.stepperForm)==null?void 0:s.steps)==null?void 0:n.length)||6;if(t>c)return!1;switch(t){case 1:return!0;case 2:return!!l.productGroup;case 3:return!!l.productRange;case 4:case 5:case 6:return!!l.individualProduct;default:return!1}}}),{name:"urbana-stepper-storage",partialize:a=>({selections:a.selections,currentStep:a.currentStep})}),{name:"urbana-stepper"})),we=({data:a})=>{const{currentStep:i,selections:t,isSubmitting:l,isSubmitted:o,updateSelection:c,nextStep:s,previousStep:n,goToStep:r,canProceedToStep:u}=N(),m=a.stepperForm.steps.length,f=async()=>{var d;N.getState().setSubmitting(!0);try{if(!(await fetch("/wp-json/urbana/v1/submit-form",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((d=window.urbanaPublic)==null?void 0:d.nonce)||""},body:JSON.stringify({selections:t,submittedAt:new Date().toISOString()})})).ok)throw new Error("Failed to submit form");N.getState().setSubmitted(!0)}catch(g){console.error("Error submitting form:",g),alert("Failed to submit form. Please try again.")}finally{N.getState().setSubmitting(!1)}},v=d=>{r(d)},E=()=>{s()},y=()=>{n()},p=S.useCallback(()=>{const d=a.stepperForm.steps[i-1];switch(i){case 1:return e.jsx(ne,{data:{categories:(d==null?void 0:d.categories)||[],productGroups:(d==null?void 0:d.productGroups)||[]},selection:t.productGroup||null,onSelect:g=>c("productGroup",g)});case 2:return e.jsx(oe,{data:{ranges:(d==null?void 0:d.ranges)||{},productRanges:(d==null?void 0:d.productRanges)||[]},productGroup:t.productGroup||"",selection:t.productRange||null,onSelect:g=>c("productRange",g)});case 3:return e.jsx(pe,{data:{products:(d==null?void 0:d.products)||{},productsData:(d==null?void 0:d.productsData)||[]},productRange:t.productRange||"",selection:t.individualProduct||null,onSelect:g=>c("individualProduct",g)});case 4:return e.jsx(xe,{data:{productDetails:(d==null?void 0:d.productDetails)||{}},productId:t.individualProduct});case 5:return e.jsx(ve,{data:{options:(d==null?void 0:d.options)||{},dynamicUpdates:(d==null?void 0:d.dynamicUpdates)||{updateImages:!1,updateFiles:!1}},options:t.options||{},onOptionsChange:g=>c("options",g)});case 6:return e.jsx(ye,{data:{fields:(d==null?void 0:d.fields)||[]},contactInfo:t.contactInfo,onContactInfoChange:g=>c("contactInfo",g),isSubmitting:l,isSubmitted:o,onSubmit:f});default:return e.jsx("div",{children:"Unknown step"})}},[i,a.stepperForm.steps,t,c,l,o,f]),I=u(i+1),L=i===m,G={hidden:{opacity:0,x:10},visible:{opacity:1,x:0},exit:{opacity:0,x:-10}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{currentStep:i,totalSteps:m,steps:a.stepperForm.steps,selections:t,onStepClick:v}),e.jsx(j,{className:"shadow-sm",children:e.jsx(b,{className:"p-6",children:e.jsxs(x.div,{initial:"hidden",animate:"visible",exit:"exit",variants:G,transition:{duration:.25},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:a.stepperForm.steps[i-1].title}),p()]},i)})}),e.jsx(ie,{currentStep:i,totalSteps:m,onNext:E,onPrevious:y,canProceed:I,isLastStep:L,isSubmitting:l,isSubmitted:o,onSubmit:f})]})};function Ne(){const{productData:a,initializeProductData:i}=N(),[t,l]=D.useState(!0),[o,c]=D.useState(null);return D.useEffect(()=>{try{const s=window.urbanaPublic;s!=null&&s.productData?(console.log("Loading product data from database:",s.productData),i(),c(null)):(console.warn("No product data found in window.urbanaPublic, using default data"),N.getState().setProductData(F),c("Using default product data - database may be empty"))}catch(s){console.error("Error initializing product data:",s),c("Failed to load product data"),N.getState().setProductData(F)}finally{l(!1)}},[i]),t?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(q,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product configuration..."})]})})}):a?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Product Configuration"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Select and customize your product in a few simple steps"})]}),o&&e.jsx(O,{color:"warning",variant:"flat",className:"mb-6",title:"Development Notice",description:o,startContent:e.jsx(h,{icon:"lucide:info",width:20})}),e.jsx(we,{data:a})]})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(O,{color:"danger",variant:"flat",className:"mb-6",title:"Configuration Error",description:"Unable to load product configuration data. Please contact support.",startContent:e.jsx(h,{icon:"lucide:alert-triangle",width:20})})})})})}V.createRoot(document.getElementById("urbana-stepper-root")).render(e.jsx(S.StrictMode,{children:e.jsxs(se,{children:[e.jsx(Q,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(Ne,{})})]})}));
