import{f as H,u as V,a as K,c as Y,j as e,b as D,I as g,R as E,r as v,d as S,e as P,s as J,l as Q,i as F,g as X,h as Z}from"./iconify.js";import{m as j}from"./proxy.js";import{c as ee,t as z,a as k}from"./chunk-ML27DD5T.js";import{i as M,a as se,b as G,p as A,c as T,T as te}from"./productData.js";import{t as ae,c as ie,a as ne,d as re,p as le,H as ce}from"./middleware.js";import"./features-animation.js";var B=H((t,i)=>{var s;const{as:n,className:u,children:l,...a}=t,r=n||"div",m=V(i),{slots:f,classNames:h}=K(),b=Y(h==null?void 0:h.footer,u);return e.jsx(r,{ref:m,className:(s=f.footer)==null?void 0:s.call(f,{class:b}),...a,children:l})});B.displayName="HeroUI.CardFooter";var oe=B;const de=({currentStep:t,totalSteps:i,onNext:s,onPrevious:n,canProceed:u,isLastStep:l,isSubmitting:a,isSubmitted:r,onSubmit:m})=>e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("div",{children:t>1&&e.jsx(D,{variant:"flat",color:"default",onPress:n,startContent:e.jsx(g,{icon:"lucide:arrow-left",width:18}),children:"Previous"})}),e.jsxs("div",{className:"text-default-500 text-sm",children:["Step ",t," of ",i]}),e.jsx("div",{children:l?e.jsx(D,{color:"primary",isDisabled:!u||a||r,isLoading:a,onPress:m,endContent:!a&&!r&&e.jsx(g,{icon:"lucide:send",width:18}),children:r?e.jsxs(j.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",width:18}),"Submitted"]}):"Submit"}):e.jsx(D,{color:"primary",isDisabled:!u,onPress:s,endContent:e.jsx(g,{icon:"lucide:arrow-right",width:18}),children:"Next"})})]}),ue=({currentStep:t,totalSteps:i,steps:s,selections:n,onStepClick:u})=>{const l=a=>a===1?!0:a===2?!!n.productGroup:a===3?!!n.productRange:a===4||a===5||a===6?!!n.individualProduct:!1;return e.jsx("div",{className:"hidden md:block mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:s.map(a=>{const r=a.step===t,m=a.step<t,f=l(a.step);return e.jsxs(E.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("button",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${r?"bg-primary text-white":m?"bg-success text-white":"bg-default-100 text-default-500"} ${f?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-60"}`,onClick:()=>f&&u(a.step),disabled:!f,"aria-label":`Go to step ${a.step}: ${a.title}`,children:m?e.jsx(g,{icon:"lucide:check",width:20}):e.jsx("span",{children:a.step})}),e.jsx("span",{className:`text-xs mt-2 text-center max-w-[80px] ${r?"text-primary font-medium":"text-default-500"}`,children:a.title})]}),a.step<i&&e.jsx("div",{className:"flex-1 h-[2px] mx-2 bg-default-200",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:m?"100%":"0%"}})})]},a.step)})})})},me=({data:t,selection:i,onSelect:s})=>{const n=v.useMemo(()=>{var a;return t.productGroups&&Array.isArray(t.productGroups)?t.productGroups.filter(r=>r.active!==!1):((a=t.categories)==null?void 0:a.map(r=>({id:r.toLowerCase().replace(/\s+/g,"-"),name:r,icon:pe(r),description:he(r),active:!0})))||[]},[t.productGroups,t.categories]),u={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},l={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsx("p",{className:"text-default-600 mb-6",children:"Please select a product category to begin your configuration."}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:u,initial:"hidden",animate:"show",children:n.map(a=>e.jsx(j.div,{variants:l,children:e.jsx(S,{isPressable:!0,onPress:()=>s(a.name),className:`transition-all duration-200 ${i===a.name?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsxs(P,{className:"flex flex-col items-center text-center p-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${i===a.name?"bg-primary text-white":"bg-default-100 text-default-500"}`,children:e.jsx(g,{icon:a.icon,width:24})}),e.jsx("h3",{className:"text-lg font-medium",children:a.name}),e.jsx("p",{className:"text-default-500 text-sm mt-1",children:a.description})]})})},a.id))})]})};function pe(t){return{Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"}[t]||"lucide:box"}function he(t){return{Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"}[t]||"Product category"}const fe=({data:t,productGroup:i,selection:s,onSelect:n})=>{t.ranges[i];const u=v.useMemo(()=>{var m,f;if(t.productRanges&&t.relationships){const h=i.toLowerCase().replace(/\s+/g,"-"),b=((m=t.relationships.groupToRanges)==null?void 0:m[h])||[];return t.productRanges.filter(C=>b.includes(C.id)&&C.active!==!1)}return(((f=t.ranges)==null?void 0:f[i])||[]).map(h=>({id:h.toLowerCase().replace(/\s+/g,"-"),name:h,image:"",description:xe(h),tags:ge(h),active:!0}))},[t.productRanges,t.relationships,t.ranges,i]),l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a product range from the ",i," category:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",variants:l,initial:"hidden",animate:"show",children:u.map((r,m)=>{const f=s===r.name;return e.jsx(j.div,{variants:a,children:e.jsx(S,{isPressable:!0,onPress:()=>n(r.name),className:`transition-all duration-200 ${f?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsx(P,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[r.image&&e.jsx(ee,{className:"p-0",children:e.jsx(M,{src:r.image,alt:r.name,className:"w-full h-40 object-cover",radius:"none"})}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:r.name}),e.jsx("p",{className:"text-default-500 text-sm mt-2",children:r.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.tags.map(h=>e.jsx("span",{className:"text-xs px-2 py-1 bg-default-100 text-default-700 rounded-medium",children:h},h))})]})]})})})},r.id)})})]})};function xe(t){return{Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas","Decorative Bridge":"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles",Ramp:"Gentle slope access solutions for wheelchairs and strollers",Staircase:"Step access with various configurations and safety features",Pathway:"Connected walkway systems for parks and public spaces",Boardwalk:"Elevated walkways for wetlands and sensitive environments",Platform:"Viewing platforms and elevated observation areas",Bench:"Traditional seating options for parks and public spaces","Table Setting":"Combined table and seating arrangements for picnic areas",Lounge:"Comfortable extended seating for relaxation areas",Stadium:"Tiered seating solutions for sports and event venues",Custom:"Bespoke seating arrangements designed to specification",Solar:"Self-sufficient lighting powered by renewable energy","Mains Powered":"Connected lighting solutions with reliable performance","Decorative Light":"Aesthetic lighting features that enhance landscapes",Security:"High visibility lighting for safety and security","Pathway Light":"Directional lighting for walkways and pedestrian areas"}[t]||`${t} product line with various options and configurations.`}function ge(t,i){const s={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return s[t]||s.default}const je=({data:t,productRange:i,selection:s,onSelect:n})=>{t.products[i];const u=v.useMemo(()=>{var m;if(t.productsData&&t.relationships){const f=i.toLowerCase().replace(/\s+/g,"-"),h=t.relationships.rangeToProducts[f]||[];return t.productsData.filter(b=>h.includes(b.id)&&b.active!==!1)}return(((m=t.products)==null?void 0:m[i])||[]).map(f=>({id:f.toLowerCase(),code:f,name:`${f} Product`,overview:$(f),description:$(f),specifications:[],imageGallery:[],files:{},active:!0}))},[t.productsData,t.relationships,t.products,i]),l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},a={hidden:{opacity:0,y:10},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a specific product from the ",i," range:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:l,initial:"hidden",animate:"show",children:u.map(r=>{const m=s===r.code;return r.imageGallery.length>0,e.jsx(j.div,{variants:a,children:e.jsxs(S,{isPressable:!0,onPress:()=>n(r.code),className:`h-full w-full transition-all duration-200 ${m?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:[e.jsxs(P,{className:"p-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("h3",{className:"text-lg font-medium",children:r.name})}),e.jsx("p",{className:"text-default-500 text-sm text-center",children:r.overview||r.description}),r.specifications.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-default-700 text-center",children:"Key Features:"}),e.jsxs("div",{className:"text-xs text-default-500",children:[r.specifications.slice(0,3).map((f,h)=>e.jsxs("div",{className:"flex items-start justify-center",children:[e.jsx(g,{icon:"lucide:check",width:14,className:"mr-1 mt-0.5 text-success"}),e.jsx("span",{children:f})]},h)),r.specifications.length>3&&e.jsxs("div",{className:"text-default-400 mt-1",children:["+",r.specifications.length-3," more features"]})]})]})]}),Object.keys(r.files).length>0&&e.jsx(oe,{className:"border-t border-default-100 px-4 py-2 justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-default-600",children:[e.jsx(g,{icon:"lucide:file-text",width:14}),e.jsxs("span",{children:[Object.keys(r.files).length," document",Object.keys(r.files).length!==1?"s":""," available"]})]})})]})},r.id)})})]})};function $(t){const i=t.match(/[A-Z]+\d+/),s=i?i[0]:t;return{K301:"Compact shelter with modern design, suitable for parks and urban settings.",K302:"Medium-sized shelter with extended roof coverage for picnic areas.",K308:"Large shelter with multiple seating options and enhanced weather protection.",K310:"Premium shelter with architectural design elements and superior materials.",K315:"Deluxe shelter with integrated seating and optional power connections.",E201:"Eco-friendly toilet with composting technology and minimal water usage.",E202:"Solar-powered toilet facility with self-contained waste management.",SS101:"Small pedestrian bridge for garden paths and decorative water crossings.",SS102:"Compact bridge with enhanced load capacity for light maintenance vehicles.",R101:"ADA compliant access ramp with gentle slope and non-slip surface.",R102:"Modular ramp system adaptable to various height requirements."}[s]||`${t} model with standard features and customization options.`}const ve=({data:t,productId:i})=>{const s=t.productDetails[i],n=v.useCallback(async(a,r)=>{try{const m=a.includes("digitaloceanspaces.com");let f=a;if(m){const b=new URL("/wp-json/urbana/v1/proxy-download",window.location.origin);b.searchParams.set("url",a),f=b.toString()}const h=document.createElement("a");h.href=f,h.download=r,h.style.display="none",h.target="_blank",document.body.appendChild(h),h.click(),document.body.removeChild(h)}catch(m){console.error("Download failed:",m),alert("Failed to download file. Please try again or contact support.")}},[]);if(!s)return e.jsxs("div",{className:"text-center p-8",children:[e.jsx(g,{icon:"lucide:file-question",className:"mx-auto mb-4 text-default-400",width:48}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Product Information Unavailable"}),e.jsxs("p",{className:"text-default-500",children:["Detailed information for ",i," is not available at this time. Please continue to the next step or contact our support team for assistance."]})]});const u={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}},l=s.imageGallery.length>0?s.imageGallery[0]:"";return e.jsxs(j.div,{className:"space-y-8",initial:"hidden",animate:"show",variants:u,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(M,{removeWrapper:!0,alt:s.name,className:"w-full h-64 object-cover rounded-medium",src:l||`https://img.heroui.chat/image/${be(i)}`})}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.name}),e.jsx("p",{className:"text-default-600 mb-4",children:s.overview}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check-circle",className:"text-success",width:20}),e.jsx("span",{children:"In Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:truck",className:"text-default-500",width:20}),e.jsx("span",{children:"Standard Delivery: 2-4 weeks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500",width:20}),e.jsx("span",{children:"10 Year Warranty"})]})]})]})]}),e.jsxs(z,{"aria-label":"Product information tabs",variant:"underlined",color:"primary",children:[e.jsx(k,{title:"Details",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-default-700",children:s.description}),e.jsx("h4",{className:"text-lg font-medium mt-6 mb-3",children:"Specifications"}),e.jsx("ul",{className:"space-y-2",children:s.specifications.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:chevron-right",className:"text-primary mt-1 flex-shrink-0",width:16}),e.jsx("span",{children:a})]},r))})]})})})},"details"),e.jsx(k,{title:"Image Gallery",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:s.imageGallery.map((a,r)=>e.jsx("div",{className:"aspect-square",children:e.jsx(M,{removeWrapper:!0,alt:`${s.name} - Image ${r+1}`,className:"w-full h-full object-cover rounded-medium",src:`${a}`})},r))})})})},"gallery"),e.jsx(k,{title:"Downloads",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-default-600 mb-4",children:"Download product documentation and technical files:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(s.files).map(([a,r])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-default-200 rounded-medium hover:border-primary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-default-100 rounded-medium",children:e.jsx(g,{icon:ye(r),className:"text-default-600",width:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a}),e.jsx("p",{className:"text-xs text-default-500",children:we(r)})]})]}),e.jsx(D,{size:"sm",variant:"flat",color:"primary",onPress:()=>n(r,Ne(r,a)),endContent:e.jsx(g,{icon:"lucide:download",width:16}),children:"Download"})]},r))})]})})})},"files"),e.jsx(k,{title:"FAQ",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs(se,{children:[e.jsx(G,{title:"What is the installation process?",children:"Installation typically requires a concrete foundation and can be completed by our certified installers. The process usually takes 1-3 days depending on the product complexity and site conditions."},"1"),e.jsx(G,{title:"What maintenance is required?",children:"Our products are designed for minimal maintenance. We recommend a visual inspection every 6 months and cleaning as needed. Specific maintenance schedules are provided in the product documentation."},"2"),e.jsx(G,{title:"Are customizations available?",children:"Yes, most products can be customized with different colors, materials, and additional features. Custom options can be selected in the next step of this configuration process."},"3"),e.jsx(G,{title:"What warranty is provided?",children:"Standard warranty is 10 years on structural components and 5 years on other elements. Extended warranties are available for purchase. All warranties cover manufacturing defects and normal wear."},"4")]})})})},"faq")]})]})};function be(t){const i=t.charAt(0);return{K:"landscape",W:"landscape",C:"landscape",U:"landscape",H:"landscape",E:"places",S:"places",A:"places",P:"places",SS:"landscape",LS:"landscape",R:"places",ST:"places",B:"furniture",TS:"furniture",SL:"places",MP:"places"}[i]||"places"}function ye(t){var n;const i=(n=t.split(".").pop())==null?void 0:n.toLowerCase(),s={pdf:"lucide:file-text",dwg:"lucide:file-cog",rvt:"lucide:file-3d",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",zip:"lucide:file-archive",default:"lucide:file"};return s[i||""]||s.default}function we(t){var n;const i=(n=t.split(".").pop())==null?void 0:n.toLowerCase(),s={pdf:"2.4 MB",dwg:"5.8 MB",rvt:"12.6 MB",doc:"1.2 MB",docx:"1.5 MB",xls:"3.1 MB",xlsx:"3.4 MB",zip:"8.7 MB",default:"1.0 MB"};return s[i||""]||s.default}function Ne(t,i){var n;try{const u=t.split("/"),l=u[u.length-1];if(l&&l.includes("."))return decodeURIComponent(l)}catch(u){console.error("Error extracting filename from URL:",u)}const s=(n=t.split(".").pop())==null?void 0:n.toLowerCase();return s&&!i.includes(".")?`${i}.${s}`:i}const Se=({data:t,options:i,onOptionsChange:s,selectedProductCode:n})=>{const u=v.useRef(n),l=v.useRef(null),a=v.useMemo(()=>{var o;return n?(o=t.productOptions)!=null&&o[n]?t.productOptions[n]:{}:t.options},[n,t.productOptions,t.options]);console.log(t);const r=v.useMemo(()=>Object.keys(a).length>0,[a]),m=v.useMemo(()=>{const o={};return Object.keys(a).forEach(p=>{i[p]&&(o[p]=i[p])}),o},[i,a]);v.useEffect(()=>{if(u.current!==n){u.current=n;const o=Object.keys(a),d=Object.keys(i);if(d.some(x=>!o.includes(x))||d.length===0){const x={};d.forEach(y=>{o.includes(y)&&(x[y]=i[y])}),JSON.stringify(x)!==JSON.stringify(i)&&s(x)}}},[n,a]);const f=v.useCallback((o,d)=>{l.current=o,s({...m,[o]:d})},[m,s]),h=v.useMemo(()=>{var d;const o=Object.keys(a);if(o.length===0)return null;if(l.current&&i[l.current]){const p=(d=a[l.current])==null?void 0:d.find(x=>x.value===i[l.current]);if(p!=null&&p.imageUrl)return p.imageUrl}for(let p=o.length-1;p>=0;p--){const x=o[p],N=i[x];if(N&&a[x]){const y=a[x].find(c=>c.value===N);if(y!=null&&y.imageUrl)return y.imageUrl}}return null},[i,a]),b=v.useMemo(()=>{var o;if(n&&((o=t.productDetails)!=null&&o[n])){const d=t.productDetails[n].imageGallery;if(d&&d.length>0)return d[0]}return"https://img.heroui.chat/image/landscape?w=800&h=600&u=preview_default"},[n,t.productDetails]),C=h||b,I={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}};return r?e.jsxs(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:I,children:[n&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:package",width:16}),e.jsxs("span",{children:["Configuring options for: ",e.jsx("strong",{children:n})]})]}),e.jsx("p",{className:"text-default-600 mb-4",children:"Customize your product by selecting from the available options below:"}),e.jsxs(z,{"aria-label":"Product configuration tabs",variant:"underlined",color:"primary",children:[e.jsx(k,{title:"Configuration Options",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([o,d])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:o}),e.jsx(J,{label:o,placeholder:`Select ${o}`,selectedKeys:i[o]?[i[o]]:[],onChange:p=>{const x=p.target.value;l.current=o,f(o,x)},className:"max-w-full",children:d.map(p=>e.jsx(Q,{children:typeof p=="string"?p:p.value},typeof p=="string"?p:p.value))})]},o))}),e.jsx("div",{children:e.jsxs("div",{className:"border border-default-200 rounded-medium p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview"}),e.jsx("div",{className:"aspect-video mb-4",children:e.jsx(M,{removeWrapper:!0,alt:"Product preview with selected options",className:"w-full h-full object-cover rounded-medium",src:C},C)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-medium text-default-500",children:"Selected Options:"}),Object.keys(m).length>0?e.jsx("ul",{className:"text-sm space-y-1",children:Object.entries(m).map(([o,d])=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",className:"text-success",width:14}),e.jsxs("span",{className:"font-medium",children:[o,":"]})," ",d]},o))}):e.jsx("p",{className:"text-sm text-default-500",children:"No options selected yet. Choose from the available options."})]})]})})]})})})},"options"),e.jsx(k,{title:"Option Impact",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"How Options Affect Your Product"}),e.jsx("p",{className:"text-default-600",children:"Different options can impact the appearance, durability, and functionality of your product. Below is a summary of how each option affects your selection."})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([o,d])=>e.jsxs("div",{className:"border-b border-default-200 pb-4 last:border-0",children:[e.jsx("h5",{className:"font-medium mb-2",children:o}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:d.map((p,x)=>{const N=typeof p=="string"?p:p.value,y=typeof p=="object"&&p.imageUrl?p.imageUrl:null;return e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[y&&e.jsx("div",{className:"aspect-video mb-2 rounded-small overflow-hidden",children:e.jsx(M,{removeWrapper:!0,alt:N,className:"w-full h-full object-cover",src:y})}),e.jsx("div",{className:"font-medium",children:N}),e.jsxs("div",{className:"text-sm text-default-500",children:[x===0&&"Standard option with included features",x===1&&"Enhanced durability and premium finish",x===2&&"Maximum performance and longevity"]})]},N)})})]},o))})]})})})},"impact"),e.jsx(k,{title:"Pricing Impact",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Option Pricing"}),e.jsx("p",{className:"text-default-600",children:"Different configuration options affect the final price of your product. Below is a breakdown of how each selection impacts pricing."})]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-default-200",children:[e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Option"}),e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Selection"}),e.jsx("th",{className:"py-2 px-4 text-right font-medium",children:"Price Impact"})]})}),e.jsx("tbody",{children:Object.entries(a).map(([o,d])=>e.jsx(E.Fragment,{children:d.map((p,x)=>{const N=typeof p=="string"?p:p.value;return e.jsxs("tr",{className:"border-b border-default-100",children:[x===0?e.jsx("td",{className:"py-2 px-4 align-top",rowSpan:d.length,children:o}):null,e.jsxs("td",{className:"py-2 px-4",children:[N,x===0&&e.jsx("span",{className:"text-xs text-default-400 ml-2",children:"(Standard)"})]}),e.jsx("td",{className:"py-2 px-4 text-right",children:x===0?"Included":`+$${(x*250+Math.random()*100).toFixed(0)}`})]},`${o}-${N}`)})},o))})]}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium",children:e.jsxs("p",{className:"text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:info",className:"inline-block mr-2",width:16}),"For exact pricing including all options and installation, please complete the form in the next step and our team will provide a detailed quote."]})})]})})})},"pricing")]})]}):e.jsx(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:I,children:e.jsx(S,{children:e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(g,{icon:"lucide:settings",width:48,className:"text-default-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Configuration Options"}),e.jsx("p",{className:"text-default-600",children:n?e.jsxs(e.Fragment,{children:["This product doesn't have any configurable options.",e.jsxs("span",{className:"block mt-2 text-sm",children:["Product: ",e.jsx("strong",{children:n})]})]}):"Please select a product first to see available configuration options."}),e.jsx("p",{className:"text-sm text-default-500 mt-4",children:n?"Proceed to the next step to complete your inquiry.":"Go back to the previous step and select a product."})]})})})},Pe=({data:t,contactInfo:i,onContactInfoChange:s,isSubmitting:n,isSubmitted:u,onSubmit:l})=>{const[a,r]=E.useState(!1),[m,f]=E.useState({}),h=(d,p)=>{s({...i,[d]:p}),m[d]&&f({...m,[d]:""})},b=()=>{const d={};return i.fullName.trim()||(d.fullName="Full name is required"),i.email.trim()?/^\S+@\S+\.\S+$/.test(i.email)||(d.email="Please enter a valid email address"):d.email="Email is required",a||(d.terms="You must accept the terms and conditions"),f(d),Object.keys(d).length===0},C=()=>{b()&&l()},I={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},o={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return u?e.jsxs(j.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(g,{icon:"lucide:check",className:"text-success",width:32})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-default-600 max-w-md mx-auto mb-6",children:"Your product configuration has been submitted successfully. Our team will review your selections and contact you shortly with pricing and next steps."})]}):e.jsxs(j.div,{className:"space-y-6",variants:I,initial:"hidden",animate:"show",children:[e.jsx(j.p,{variants:o,className:"text-default-600",children:"Please provide your contact information to receive a detailed quote for your configured product."}),e.jsxs(j.div,{variants:o,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{label:"Full Name",placeholder:"Enter your full name",value:i.fullName,onValueChange:d=>h("fullName",d),isRequired:!0,isInvalid:!!m.fullName,errorMessage:m.fullName}),e.jsx(F,{label:"Email Address",placeholder:"Enter your email address",type:"email",value:i.email,onValueChange:d=>h("email",d),isRequired:!0,isInvalid:!!m.email,errorMessage:m.email})]}),e.jsxs(j.div,{variants:o,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:i.phone,onValueChange:d=>h("phone",d)}),e.jsx(F,{label:"Company/Organization",placeholder:"Enter your company or organization",value:i.company,onValueChange:d=>h("company",d)})]}),e.jsx(j.div,{variants:o,children:e.jsx(ae,{label:"Additional Notes",placeholder:"Enter any specific requirements or questions",value:i.message,onValueChange:d=>h("message",d),minRows:3})}),e.jsxs(j.div,{variants:o,className:"space-y-4",children:[e.jsx(ie,{isSelected:a,onValueChange:r,isInvalid:!!m.terms,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"I agree to the Terms and Conditions and Privacy Policy"}),m.terms&&e.jsx("span",{className:"text-danger text-xs mt-1",children:m.terms})]})}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium text-sm text-default-600",children:e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500 mt-0.5 flex-shrink-0",width:16}),e.jsx("span",{children:"Your information is secure and will only be used to process your product inquiry. We will never share your details with third parties without your consent."})]})})]}),e.jsx(j.div,{variants:o,className:"pt-4",children:e.jsx(D,{color:"primary",size:"lg",className:"w-full md:w-auto",isDisabled:n,isLoading:n,onPress:C,endContent:!n&&e.jsx(g,{icon:"lucide:send",width:18}),children:"Submit Configuration"})})]})},U={productGroup:null,productRange:null,individualProduct:null,options:{},contactInfo:{fullName:"",email:"",phone:"",company:"",message:""}},R=ne()(re(le((t,i)=>({productData:null,currentStep:1,selections:U,isSubmitting:!1,isSubmitted:!1,initializeProductData:()=>{const s=window.urbanaPublic;s!=null&&s.productData?(console.log("Initializing stepper with database product data"),t({productData:s.productData})):console.warn("No database product data found in window.urbanaPublic")},setProductData:s=>{t({productData:s})},setCurrentStep:s=>t({currentStep:s}),updateSelection:(s,n)=>t(u=>{const l={...u.selections};return s==="productGroup"?(l.productGroup=n,l.productRange=null,l.individualProduct=null):s==="productRange"?(l.productRange=n,l.individualProduct=null):s==="options"?l.options={...l.options,...n}:s==="contactInfo"?l.contactInfo={...l.contactInfo,...n}:l[s]=n,{selections:l}}),nextStep:()=>t(s=>({currentStep:Math.min(s.currentStep+1,6)})),previousStep:()=>t(s=>({currentStep:Math.max(s.currentStep-1,1)})),goToStep:s=>{var a,r;const{selections:n,productData:u}=i(),l=((r=(a=u==null?void 0:u.stepperForm)==null?void 0:a.steps)==null?void 0:r.length)||6;return s<1||s>l?!1:s===1||s===2&&n.productGroup||s===3&&n.productRange||s>=4&&n.individualProduct?(t({currentStep:s}),!0):!1},setSubmitting:s=>t({isSubmitting:s}),setSubmitted:s=>t({isSubmitted:s}),resetStepper:()=>t({currentStep:1,selections:U,isSubmitting:!1,isSubmitted:!1}),canProceedToStep:s=>{var a,r;const{selections:n,productData:u}=i(),l=((r=(a=u==null?void 0:u.stepperForm)==null?void 0:a.steps)==null?void 0:r.length)||6;if(s>l)return!1;switch(s){case 1:return!0;case 2:return!!n.productGroup;case 3:return!!n.productRange;case 4:case 5:case 6:return!!n.individualProduct;default:return!1}}}),{name:"urbana-stepper-storage",partialize:t=>({selections:t.selections,currentStep:t.currentStep})}),{name:"urbana-stepper"})),Ce=({data:t})=>{const{currentStep:i,selections:s,isSubmitting:n,isSubmitted:u,updateSelection:l,nextStep:a,previousStep:r,goToStep:m,canProceedToStep:f}=R(),h=t.stepperForm.steps.length,b=v.useMemo(()=>{var L;if(!s.individualProduct)return{};const c=t.stepperForm.steps[4],O=(L=c==null?void 0:c.productOptions)==null?void 0:L[s.individualProduct];if(!O)return{};const w={},q=Object.keys(O);return Object.entries(s.options).forEach(([_,W])=>{q.includes(_)&&(w[_]=W)}),w},[s.individualProduct,s.options,t.stepperForm.steps]),C=v.useCallback(async()=>{var c;R.getState().setSubmitting(!0);try{const O={productGroup:s.productGroup,productRange:s.productRange,individualProduct:s.individualProduct,options:b,contactInfo:s.contactInfo};if(console.log("Submitting form data:",O),!(await fetch("/wp-json/urbana/v1/submit-form",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((c=window.urbanaPublic)==null?void 0:c.nonce)||""},body:JSON.stringify({selections:O,submittedAt:new Date().toISOString()})})).ok)throw new Error("Failed to submit form");R.getState().setSubmitted(!0)}catch(O){console.error("Error submitting form:",O),alert("Failed to submit form. Please try again.")}finally{R.getState().setSubmitting(!1)}},[s,b]),I=c=>{m(c)},o=()=>{a()},d=()=>{r()},p=E.useCallback(()=>{var O;const c=t.stepperForm.steps[i-1];switch(i){case 1:return e.jsx(me,{data:{categories:(c==null?void 0:c.categories)||[],productGroups:(c==null?void 0:c.productGroups)||[]},selection:s.productGroup||null,onSelect:w=>l("productGroup",w)});case 2:return e.jsx(fe,{data:{ranges:(c==null?void 0:c.ranges)||{},productRanges:(c==null?void 0:c.productRanges)||[],relationships:c==null?void 0:c.relationships},productGroup:s.productGroup||"",selection:s.productRange||null,onSelect:w=>l("productRange",w)});case 3:return e.jsx(je,{data:{products:(c==null?void 0:c.products)||{},productsData:(c==null?void 0:c.productsData)||[],relationships:c==null?void 0:c.relationships},productRange:s.productRange||"",selection:s.individualProduct||null,onSelect:w=>l("individualProduct",w)});case 4:return e.jsx(ve,{data:{productDetails:(c==null?void 0:c.productDetails)||{}},productId:s.individualProduct});case 5:return console.log(c,s.options),e.jsx(Se,{data:{options:(c==null?void 0:c.options)||{},productOptions:(c==null?void 0:c.productOptions)||{},productDetails:((O=t.stepperForm.steps[3])==null?void 0:O.productDetails)||{},dynamicUpdates:(c==null?void 0:c.dynamicUpdates)||{updateImages:!1,updateFiles:!1}},options:s.options||{},onOptionsChange:w=>l("options",w),selectedProductCode:s.individualProduct||void 0});case 6:return e.jsx(Pe,{data:{fields:(c==null?void 0:c.fields)||[]},contactInfo:s.contactInfo,onContactInfoChange:w=>l("contactInfo",w),isSubmitting:n,isSubmitted:u,onSubmit:C});default:return e.jsx("div",{children:"Unknown step"})}},[i,t.stepperForm.steps,s,l,n,u,C]),x=f(i+1),N=i===h,y={hidden:{opacity:0,x:10},visible:{opacity:1,x:0},exit:{opacity:0,x:-10}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{currentStep:i,totalSteps:h,steps:t.stepperForm.steps,selections:s,onStepClick:I}),e.jsx(S,{className:"shadow-sm",children:e.jsx(P,{className:"p-6",children:e.jsxs(j.div,{initial:"hidden",animate:"visible",exit:"exit",variants:y,transition:{duration:.25},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:t.stepperForm.steps[i-1].title}),p()]},i)})}),e.jsx(de,{currentStep:i,totalSteps:h,onNext:o,onPrevious:d,canProceed:x,isLastStep:N,isSubmitting:n,isSubmitted:u,onSubmit:C})]})};function Oe(){const{productData:t,initializeProductData:i}=R(),[s,n]=v.useState(!0),[u,l]=v.useState(null);return v.useEffect(()=>{try{const a=window.urbanaPublic;a!=null&&a.productData?(console.log("Loading product data from database:",a.productData),i(),l(null)):(console.warn("No product data found in window.urbanaPublic, using default data"),R.getState().setProductData(A),l("Using default product data - database may be empty"))}catch(a){console.error("Error initializing product data:",a),l("Failed to load product data"),R.getState().setProductData(A)}finally{n(!1)}},[i]),s?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(X,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product configuration..."})]})})}):t?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Product Configuration"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Select and customize your product in a few simple steps"})]}),u&&e.jsx(T,{color:"warning",variant:"flat",className:"mb-6",title:"Development Notice",description:u,startContent:e.jsx(g,{icon:"lucide:info",width:20})}),e.jsx(Ce,{data:t})]})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(T,{color:"danger",variant:"flat",className:"mb-6",title:"Configuration Error",description:"Unable to load product configuration data. Please contact support.",startContent:e.jsx(g,{icon:"lucide:alert-triangle",width:20})})})})})}Z.createRoot(document.getElementById("urbana-stepper-root")).render(e.jsx(E.StrictMode,{children:e.jsxs(ce,{children:[e.jsx(te,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(Oe,{})})]})}));
