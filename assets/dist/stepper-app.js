import{f as H,u as V,a as K,c as Y,j as e,b as E,I as g,R as k,d as S,e as P,r as w,s as J,l as Q,i as F,g as X,h as Z}from"./iconify.js";import{m as j}from"./proxy.js";import{i as I,b as ee,a as te,c as M,p as $,d as L,T as se}from"./productData.js";import{t as z,a as D}from"./chunk-ML27DD5T.js";import{t as ae,c as ie,a as ne,d as re,p as le,H as ce}from"./middleware.js";import"./features-animation.js";var U=H((s,a)=>{var t;const{as:n,className:u,children:r,...i}=s,o=n||"div",l=V(a),{slots:f,classNames:p}=K(),b=Y(p==null?void 0:p.footer,u);return e.jsx(o,{ref:l,className:(t=f.footer)==null?void 0:t.call(f,{class:b}),...i,children:r})});U.displayName="HeroUI.CardFooter";var oe=U;const de=({currentStep:s,totalSteps:a,onNext:t,onPrevious:n,canProceed:u,isLastStep:r,isSubmitting:i,isSubmitted:o,onSubmit:l})=>e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("div",{children:s>1&&e.jsx(E,{variant:"flat",color:"default",onPress:n,startContent:e.jsx(g,{icon:"lucide:arrow-left",width:18}),children:"Previous"})}),e.jsxs("div",{className:"text-default-500 text-sm",children:["Step ",s," of ",a]}),e.jsx("div",{children:r?e.jsx(E,{color:"primary",isDisabled:!u||i||o,isLoading:i,onPress:l,endContent:!i&&!o&&e.jsx(g,{icon:"lucide:send",width:18}),children:o?e.jsxs(j.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",width:18}),"Submitted"]}):"Submit"}):e.jsx(E,{color:"primary",isDisabled:!u,onPress:t,endContent:e.jsx(g,{icon:"lucide:arrow-right",width:18}),children:"Next"})})]}),ue=({currentStep:s,totalSteps:a,steps:t,selections:n,onStepClick:u})=>{const r=i=>i===1?!0:i===2?!!n.productGroup:i===3?!!n.productRange:i===4||i===5||i===6?!!n.individualProduct:!1;return e.jsx("div",{className:"hidden md:block mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:t.map(i=>{const o=i.step===s,l=i.step<s,f=r(i.step);return e.jsxs(k.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("button",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${o?"bg-primary text-white":l?"bg-success text-white":"bg-default-100 text-default-500"} ${f?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-60"}`,onClick:()=>f&&u(i.step),disabled:!f,"aria-label":`Go to step ${i.step}: ${i.title}`,children:l?e.jsx(g,{icon:"lucide:check",width:20}):e.jsx("span",{children:i.step})}),e.jsx("span",{className:`text-xs mt-2 text-center max-w-[80px] ${o?"text-primary font-medium":"text-default-500"}`,children:i.title})]}),i.step<a&&e.jsx("div",{className:"flex-1 h-[2px] mx-2 bg-default-200",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:l?"100%":"0%"}})})]},i.step)})})})},me=({data:s,selection:a,onSelect:t})=>{const n=i=>{if(console.log("data.productGroups",s.productGroups),s.productGroups){const o=s.productGroups.find(l=>l.name===i);if(console.log("foundGroup",o),o)return o}return{id:i.toLowerCase().replace(/\s+/g,"-"),name:i,icon:pe(i),description:he(i)}},u={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsx("p",{className:"text-default-600 mb-6",children:"Please select a product category to begin your configuration."}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:u,initial:"hidden",animate:"show",children:s.categories.map(i=>{const o=n(i);return e.jsx(j.div,{variants:r,children:e.jsx(S,{isPressable:!0,onPress:()=>t(i),className:`transition-all duration-200 ${a===i?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsxs(P,{className:"flex flex-col items-center text-center p-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${a===i?"bg-primary text-white":"bg-default-100 text-default-500"}`,children:e.jsx(g,{icon:o.icon,width:24})}),e.jsx("h3",{className:"text-lg font-medium",children:i}),e.jsx("p",{className:"text-default-500 text-sm mt-1",children:o.description})]})})},i)})})]})};function pe(s){return{Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"}[s]||"lucide:box"}function he(s){return{Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"}[s]||"Product category"}const fe=({data:s,productGroup:a,selection:t,onSelect:n})=>{const u=s.ranges[a]||[],r=l=>{if(s.productRanges){const f=s.productRanges.find(p=>p.name===l);if(f)return f}return{id:l.toLowerCase().replace(/\s+/g,"-"),name:l,image:"",description:ge(l,a),tags:je(l)}},i={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},o={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a product range from the ",a," category:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",variants:i,initial:"hidden",animate:"show",children:u.map((l,f)=>{const p=r(l),b=p.image||`https://img.heroui.chat/image/${xe(a)}?w=300&h=300&u=${a}_${f}`;return e.jsx(j.div,{variants:o,children:e.jsx(S,{isPressable:!0,onPress:()=>n(l),className:`transition-all duration-200 ${t===l?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsx(P,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsx("div",{className:"w-full sm:w-1/3 h-40",children:e.jsx(I,{removeWrapper:!0,alt:`${l} product range`,className:"w-full h-full object-cover",src:b})}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:l}),e.jsx("p",{className:"text-default-500 text-sm mt-2",children:p.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:p.tags.map(v=>e.jsx("span",{className:"text-xs px-2 py-1 bg-default-100 text-default-700 rounded-medium",children:v},v))})]})]})})})},l)})})]})};function xe(s){return{Shelter:"landscape",Toilet:"places",Bridge:"landscape",Access:"places",Seating:"furniture",Lighting:"places"}[s]||"places"}function ge(s,a){return{Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas","Decorative Bridge":"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles",Ramp:"Gentle slope access solutions for wheelchairs and strollers",Staircase:"Step access with various configurations and safety features",Pathway:"Connected walkway systems for parks and public spaces",Boardwalk:"Elevated walkways for wetlands and sensitive environments",Platform:"Viewing platforms and elevated observation areas",Bench:"Traditional seating options for parks and public spaces","Table Setting":"Combined table and seating arrangements for picnic areas",Lounge:"Comfortable extended seating for relaxation areas",Stadium:"Tiered seating solutions for sports and event venues",Custom:"Bespoke seating arrangements designed to specification",Solar:"Self-sufficient lighting powered by renewable energy","Mains Powered":"Connected lighting solutions with reliable performance","Decorative Light":"Aesthetic lighting features that enhance landscapes",Security:"High visibility lighting for safety and security","Pathway Light":"Directional lighting for walkways and pedestrian areas"}[s]||`${s} product range for ${a}`}function je(s,a){const t={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return t[s]||t.default}const be=({data:s,productRange:a,selection:t,onSelect:n})=>{const u=s.products[a]||[],r=l=>{if(s.productsData&&Array.isArray(s.productsData)){const f=s.productsData.find(p=>p.code===l);if(f)return f}return{id:l.toLowerCase(),code:l,name:`${l} Product`,overview:_(l),description:_(l),specifications:[],imageGallery:[],files:{}}},i={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},o={hidden:{opacity:0,y:10},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a specific product from the ",a," range:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:i,initial:"hidden",animate:"show",children:u.map(l=>{const f=t===l,p=r(l),b=ve(l);return e.jsx(j.div,{variants:o,children:e.jsxs(S,{isPressable:!0,onPress:()=>n(l),className:`h-full transition-all duration-200 ${f?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:[e.jsxs(P,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:p.name||l}),f&&e.jsx(ee,{color:"primary",variant:"flat",children:"Selected"})]}),e.jsx("p",{className:"text-default-500 text-sm",children:p.overview||p.description})]}),e.jsx(oe,{className:"border-t border-default-100 gap-2 flex-wrap",children:b.map(v=>e.jsxs("div",{className:"flex items-center text-xs text-default-600",children:[e.jsx(g,{icon:v.icon,className:"mr-1",width:14}),e.jsx("span",{children:v.name})]},v.name))})]})},l)})})]})};function _(s){const a=s.match(/[A-Z]+\d+/),t=a?a[0]:s;return{K301:"Compact shelter with modern design, suitable for parks and urban settings.",K302:"Medium-sized shelter with extended roof coverage for picnic areas.",K308:"Large shelter with multiple seating options and enhanced weather protection.",K310:"Premium shelter with architectural design elements and superior materials.",K315:"Deluxe shelter with integrated seating and optional power connections.",E201:"Eco-friendly toilet with composting technology and minimal water usage.",E202:"Solar-powered toilet facility with self-contained waste management.",SS101:"Small pedestrian bridge for garden paths and decorative water crossings.",SS102:"Compact bridge with enhanced load capacity for light maintenance vehicles.",R101:"ADA compliant access ramp with gentle slope and non-slip surface.",R102:"Modular ramp system adaptable to various height requirements."}[t]||`${s} model with standard features and customization options.`}function ve(s){const a=s.charAt(0),t={K:[{name:"Weather Resistant",icon:"lucide:cloud-rain"},{name:"UV Protection",icon:"lucide:sun"},{name:"Seating Options",icon:"lucide:armchair"}],W:[{name:"Wind Resistant",icon:"lucide:wind"},{name:"Corrosion Proof",icon:"lucide:shield"},{name:"Heavy Duty",icon:"lucide:hammer"}],E:[{name:"Eco-Friendly",icon:"lucide:leaf"},{name:"Low Maintenance",icon:"lucide:settings-2"},{name:"Odor Control",icon:"lucide:fan"}],S:[{name:"Standard Compliant",icon:"lucide:check-circle"},{name:"Easy Clean",icon:"lucide:sparkles"},{name:"Vandal Resistant",icon:"lucide:shield"}],R:[{name:"ADA Compliant",icon:"lucide:wheelchair"},{name:"Non-Slip Surface",icon:"lucide:footprints"},{name:"Handrails",icon:"lucide:grip-horizontal"}],default:[{name:"Customizable",icon:"lucide:settings"},{name:"Quality Materials",icon:"lucide:badge-check"},{name:"Warranty",icon:"lucide:shield"}]};return t[a]||t.default}const ye=({data:s,productId:a})=>{const t=s.productDetails[a],n=w.useCallback(async(i,o)=>{try{const l=i.includes("digitaloceanspaces.com");let f=i;if(l){const b=new URL("/wp-json/urbana/v1/proxy-download",window.location.origin);b.searchParams.set("url",i),f=b.toString()}const p=document.createElement("a");p.href=f,p.download=o,p.style.display="none",p.target="_blank",document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(l){console.error("Download failed:",l),alert("Failed to download file. Please try again or contact support.")}},[]);if(!t)return e.jsxs("div",{className:"text-center p-8",children:[e.jsx(g,{icon:"lucide:file-question",className:"mx-auto mb-4 text-default-400",width:48}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Product Information Unavailable"}),e.jsxs("p",{className:"text-default-500",children:["Detailed information for ",a," is not available at this time. Please continue to the next step or contact our support team for assistance."]})]});const u={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}},r=t.imageGallery.length>0?t.imageGallery[0]:"";return e.jsxs(j.div,{className:"space-y-8",initial:"hidden",animate:"show",variants:u,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(I,{removeWrapper:!0,alt:t.name,className:"w-full h-64 object-cover rounded-medium",src:r||`https://img.heroui.chat/image/${we(a)}`})}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),e.jsx("p",{className:"text-default-600 mb-4",children:t.overview}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check-circle",className:"text-success",width:20}),e.jsx("span",{children:"In Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:truck",className:"text-default-500",width:20}),e.jsx("span",{children:"Standard Delivery: 2-4 weeks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500",width:20}),e.jsx("span",{children:"10 Year Warranty"})]})]})]})]}),e.jsxs(z,{"aria-label":"Product information tabs",variant:"underlined",color:"primary",children:[e.jsx(D,{title:"Details",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-default-700",children:t.description}),e.jsx("h4",{className:"text-lg font-medium mt-6 mb-3",children:"Specifications"}),e.jsx("ul",{className:"space-y-2",children:t.specifications.map((i,o)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:chevron-right",className:"text-primary mt-1 flex-shrink-0",width:16}),e.jsx("span",{children:i})]},o))})]})})})},"details"),e.jsx(D,{title:"Image Gallery",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.imageGallery.map((i,o)=>e.jsx("div",{className:"aspect-square",children:e.jsx(I,{removeWrapper:!0,alt:`${t.name} - Image ${o+1}`,className:"w-full h-full object-cover rounded-medium",src:`${i}`})},o))})})})},"gallery"),e.jsx(D,{title:"Downloads",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-default-600 mb-4",children:"Download product documentation and technical files:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.files).map(([i,o])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-default-200 rounded-medium hover:border-primary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-default-100 rounded-medium",children:e.jsx(g,{icon:Ne(o),className:"text-default-600",width:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i}),e.jsx("p",{className:"text-xs text-default-500",children:Se(o)})]})]}),e.jsx(E,{size:"sm",variant:"flat",color:"primary",onPress:()=>n(o,Pe(o,i)),endContent:e.jsx(g,{icon:"lucide:download",width:16}),children:"Download"})]},o))})]})})})},"files"),e.jsx(D,{title:"FAQ",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs(te,{children:[e.jsx(M,{title:"What is the installation process?",children:"Installation typically requires a concrete foundation and can be completed by our certified installers. The process usually takes 1-3 days depending on the product complexity and site conditions."},"1"),e.jsx(M,{title:"What maintenance is required?",children:"Our products are designed for minimal maintenance. We recommend a visual inspection every 6 months and cleaning as needed. Specific maintenance schedules are provided in the product documentation."},"2"),e.jsx(M,{title:"Are customizations available?",children:"Yes, most products can be customized with different colors, materials, and additional features. Custom options can be selected in the next step of this configuration process."},"3"),e.jsx(M,{title:"What warranty is provided?",children:"Standard warranty is 10 years on structural components and 5 years on other elements. Extended warranties are available for purchase. All warranties cover manufacturing defects and normal wear."},"4")]})})})},"faq")]})]})};function we(s){const a=s.charAt(0);return{K:"landscape",W:"landscape",C:"landscape",U:"landscape",H:"landscape",E:"places",S:"places",A:"places",P:"places",SS:"landscape",LS:"landscape",R:"places",ST:"places",B:"furniture",TS:"furniture",SL:"places",MP:"places"}[a]||"places"}function Ne(s){var n;const a=(n=s.split(".").pop())==null?void 0:n.toLowerCase(),t={pdf:"lucide:file-text",dwg:"lucide:file-cog",rvt:"lucide:file-3d",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",zip:"lucide:file-archive",default:"lucide:file"};return t[a||""]||t.default}function Se(s){var n;const a=(n=s.split(".").pop())==null?void 0:n.toLowerCase(),t={pdf:"2.4 MB",dwg:"5.8 MB",rvt:"12.6 MB",doc:"1.2 MB",docx:"1.5 MB",xls:"3.1 MB",xlsx:"3.4 MB",zip:"8.7 MB",default:"1.0 MB"};return t[a||""]||t.default}function Pe(s,a){var n;try{const u=s.split("/"),r=u[u.length-1];if(r&&r.includes("."))return decodeURIComponent(r)}catch(u){console.error("Error extracting filename from URL:",u)}const t=(n=s.split(".").pop())==null?void 0:n.toLowerCase();return t&&!a.includes(".")?`${a}.${t}`:a}const Ce=({data:s,options:a,onOptionsChange:t,selectedProductCode:n})=>{const u=w.useRef(n),r=w.useMemo(()=>{var m;return n?(m=s.productOptions)!=null&&m[n]?s.productOptions[n]:{}:s.options},[n,s.productOptions,s.options]);console.log(s);const i=w.useMemo(()=>Object.keys(r).length>0,[r]),o=w.useMemo(()=>{const m={},h=Object.keys(r);return Object.entries(a).forEach(([c,x])=>{h.includes(c)&&(m[c]=x)}),m},[a,r]);w.useEffect(()=>{if(u.current!==n){u.current=n;const m=Object.keys(r),h=Object.keys(a);if(h.some(x=>!m.includes(x))||h.length===0){const x={};h.forEach(C=>{m.includes(C)&&(x[C]=a[C])}),JSON.stringify(x)!==JSON.stringify(a)&&t(x)}}},[n,r]);const l=w.useCallback((m,h)=>{t({...o,[m]:h})},[o,t]),f=w.useMemo(()=>{const m=Object.keys(a);if(m.length===0)return null;for(let h=m.length-1;h>=0;h--){const c=m[h],x=a[c];if(r[c]){const y=r[c].find(C=>C.value===x);if(y!=null&&y.imageUrl)return y.imageUrl}}return null},[a,r]),p=w.useMemo(()=>{var m;if(n&&((m=s.productDetails)!=null&&m[n])){const h=s.productDetails[n].imageGallery;if(h&&h.length>0)return h[0]}return"https://img.heroui.chat/image/landscape?w=800&h=600&u=preview_default"},[n,s.productDetails]),b=f||p,v={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}};return i?e.jsxs(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:v,children:[n&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:package",width:16}),e.jsxs("span",{children:["Configuring options for: ",e.jsx("strong",{children:n})]})]}),e.jsx("p",{className:"text-default-600 mb-4",children:"Customize your product by selecting from the available options below:"}),e.jsxs(z,{"aria-label":"Product configuration tabs",variant:"underlined",color:"primary",children:[e.jsx(D,{title:"Configuration Options",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(r).map(([m,h])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:m}),e.jsx(J,{label:m,placeholder:`Select ${m}`,selectedKeys:a[m]?[a[m]]:[],onChange:c=>{const x=c.target.value;l(m,x)},className:"max-w-full",children:h.map(c=>e.jsx(Q,{children:typeof c=="string"?c:c.value},typeof c=="string"?c:c.value))})]},m))}),e.jsx("div",{children:e.jsxs("div",{className:"border border-default-200 rounded-medium p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview"}),e.jsx("div",{className:"aspect-video mb-4",children:e.jsx(I,{removeWrapper:!0,alt:"Product preview with selected options",className:"w-full h-full object-cover rounded-medium",src:b},b)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-medium text-default-500",children:"Selected Options:"}),Object.keys(o).length>0?e.jsx("ul",{className:"text-sm space-y-1",children:Object.entries(o).map(([m,h])=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",className:"text-success",width:14}),e.jsxs("span",{className:"font-medium",children:[m,":"]})," ",h]},m))}):e.jsx("p",{className:"text-sm text-default-500",children:"No options selected yet. Choose from the available options."})]})]})})]})})})},"options"),e.jsx(D,{title:"Option Impact",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"How Options Affect Your Product"}),e.jsx("p",{className:"text-default-600",children:"Different options can impact the appearance, durability, and functionality of your product. Below is a summary of how each option affects your selection."})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(r).map(([m,h])=>e.jsxs("div",{className:"border-b border-default-200 pb-4 last:border-0",children:[e.jsx("h5",{className:"font-medium mb-2",children:m}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:h.map((c,x)=>{const y=typeof c=="string"?c:c.value,C=typeof c=="object"&&c.imageUrl?c.imageUrl:null;return e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[C&&e.jsx("div",{className:"aspect-video mb-2 rounded-small overflow-hidden",children:e.jsx(I,{removeWrapper:!0,alt:y,className:"w-full h-full object-cover",src:C})}),e.jsx("div",{className:"font-medium",children:y}),e.jsxs("div",{className:"text-sm text-default-500",children:[x===0&&"Standard option with included features",x===1&&"Enhanced durability and premium finish",x===2&&"Maximum performance and longevity"]})]},y)})})]},m))})]})})})},"impact"),e.jsx(D,{title:"Pricing Impact",children:e.jsx(S,{children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Option Pricing"}),e.jsx("p",{className:"text-default-600",children:"Different configuration options affect the final price of your product. Below is a breakdown of how each selection impacts pricing."})]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-default-200",children:[e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Option"}),e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Selection"}),e.jsx("th",{className:"py-2 px-4 text-right font-medium",children:"Price Impact"})]})}),e.jsx("tbody",{children:Object.entries(r).map(([m,h])=>e.jsx(k.Fragment,{children:h.map((c,x)=>{const y=typeof c=="string"?c:c.value;return e.jsxs("tr",{className:"border-b border-default-100",children:[x===0?e.jsx("td",{className:"py-2 px-4 align-top",rowSpan:h.length,children:m}):null,e.jsxs("td",{className:"py-2 px-4",children:[y,x===0&&e.jsx("span",{className:"text-xs text-default-400 ml-2",children:"(Standard)"})]}),e.jsx("td",{className:"py-2 px-4 text-right",children:x===0?"Included":`+$${(x*250+Math.random()*100).toFixed(0)}`})]},`${m}-${y}`)})},m))})]}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium",children:e.jsxs("p",{className:"text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:info",className:"inline-block mr-2",width:16}),"For exact pricing including all options and installation, please complete the form in the next step and our team will provide a detailed quote."]})})]})})})},"pricing")]})]}):e.jsx(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:v,children:e.jsx(S,{children:e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(g,{icon:"lucide:settings",width:48,className:"text-default-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Configuration Options"}),e.jsx("p",{className:"text-default-600",children:n?e.jsxs(e.Fragment,{children:["This product doesn't have any configurable options.",e.jsxs("span",{className:"block mt-2 text-sm",children:["Product: ",e.jsx("strong",{children:n})]})]}):"Please select a product first to see available configuration options."}),e.jsx("p",{className:"text-sm text-default-500 mt-4",children:n?"Proceed to the next step to complete your inquiry.":"Go back to the previous step and select a product."})]})})})},Oe=({data:s,contactInfo:a,onContactInfoChange:t,isSubmitting:n,isSubmitted:u,onSubmit:r})=>{const[i,o]=k.useState(!1),[l,f]=k.useState({}),p=(c,x)=>{t({...a,[c]:x}),l[c]&&f({...l,[c]:""})},b=()=>{const c={};return a.fullName.trim()||(c.fullName="Full name is required"),a.email.trim()?/^\S+@\S+\.\S+$/.test(a.email)||(c.email="Please enter a valid email address"):c.email="Email is required",i||(c.terms="You must accept the terms and conditions"),f(c),Object.keys(c).length===0},v=()=>{b()&&r()},m={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return u?e.jsxs(j.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(g,{icon:"lucide:check",className:"text-success",width:32})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-default-600 max-w-md mx-auto mb-6",children:"Your product configuration has been submitted successfully. Our team will review your selections and contact you shortly with pricing and next steps."})]}):e.jsxs(j.div,{className:"space-y-6",variants:m,initial:"hidden",animate:"show",children:[e.jsx(j.p,{variants:h,className:"text-default-600",children:"Please provide your contact information to receive a detailed quote for your configured product."}),e.jsxs(j.div,{variants:h,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{label:"Full Name",placeholder:"Enter your full name",value:a.fullName,onValueChange:c=>p("fullName",c),isRequired:!0,isInvalid:!!l.fullName,errorMessage:l.fullName}),e.jsx(F,{label:"Email Address",placeholder:"Enter your email address",type:"email",value:a.email,onValueChange:c=>p("email",c),isRequired:!0,isInvalid:!!l.email,errorMessage:l.email})]}),e.jsxs(j.div,{variants:h,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:a.phone,onValueChange:c=>p("phone",c)}),e.jsx(F,{label:"Company/Organization",placeholder:"Enter your company or organization",value:a.company,onValueChange:c=>p("company",c)})]}),e.jsx(j.div,{variants:h,children:e.jsx(ae,{label:"Additional Notes",placeholder:"Enter any specific requirements or questions",value:a.message,onValueChange:c=>p("message",c),minRows:3})}),e.jsxs(j.div,{variants:h,className:"space-y-4",children:[e.jsx(ie,{isSelected:i,onValueChange:o,isInvalid:!!l.terms,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"I agree to the Terms and Conditions and Privacy Policy"}),l.terms&&e.jsx("span",{className:"text-danger text-xs mt-1",children:l.terms})]})}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium text-sm text-default-600",children:e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500 mt-0.5 flex-shrink-0",width:16}),e.jsx("span",{children:"Your information is secure and will only be used to process your product inquiry. We will never share your details with third parties without your consent."})]})})]}),e.jsx(j.div,{variants:h,className:"pt-4",children:e.jsx(E,{color:"primary",size:"lg",className:"w-full md:w-auto",isDisabled:n,isLoading:n,onPress:v,endContent:!n&&e.jsx(g,{icon:"lucide:send",width:18}),children:"Submit Configuration"})})]})},T={productGroup:null,productRange:null,individualProduct:null,options:{},contactInfo:{fullName:"",email:"",phone:"",company:"",message:""}},R=ne()(re(le((s,a)=>({productData:null,currentStep:1,selections:T,isSubmitting:!1,isSubmitted:!1,initializeProductData:()=>{const t=window.urbanaPublic;t!=null&&t.productData?(console.log("Initializing stepper with database product data"),s({productData:t.productData})):console.warn("No database product data found in window.urbanaPublic")},setProductData:t=>{s({productData:t})},setCurrentStep:t=>s({currentStep:t}),updateSelection:(t,n)=>s(u=>{const r={...u.selections};return t==="productGroup"?(r.productGroup=n,r.productRange=null,r.individualProduct=null):t==="productRange"?(r.productRange=n,r.individualProduct=null):t==="options"?r.options={...r.options,...n}:t==="contactInfo"?r.contactInfo={...r.contactInfo,...n}:r[t]=n,{selections:r}}),nextStep:()=>s(t=>({currentStep:Math.min(t.currentStep+1,6)})),previousStep:()=>s(t=>({currentStep:Math.max(t.currentStep-1,1)})),goToStep:t=>{var i,o;const{selections:n,productData:u}=a(),r=((o=(i=u==null?void 0:u.stepperForm)==null?void 0:i.steps)==null?void 0:o.length)||6;return t<1||t>r?!1:t===1||t===2&&n.productGroup||t===3&&n.productRange||t>=4&&n.individualProduct?(s({currentStep:t}),!0):!1},setSubmitting:t=>s({isSubmitting:t}),setSubmitted:t=>s({isSubmitted:t}),resetStepper:()=>s({currentStep:1,selections:T,isSubmitting:!1,isSubmitted:!1}),canProceedToStep:t=>{var i,o;const{selections:n,productData:u}=a(),r=((o=(i=u==null?void 0:u.stepperForm)==null?void 0:i.steps)==null?void 0:o.length)||6;if(t>r)return!1;switch(t){case 1:return!0;case 2:return!!n.productGroup;case 3:return!!n.productRange;case 4:case 5:case 6:return!!n.individualProduct;default:return!1}}}),{name:"urbana-stepper-storage",partialize:s=>({selections:s.selections,currentStep:s.currentStep})}),{name:"urbana-stepper"})),De=({data:s})=>{const{currentStep:a,selections:t,isSubmitting:n,isSubmitted:u,updateSelection:r,nextStep:i,previousStep:o,goToStep:l,canProceedToStep:f}=R(),p=s.stepperForm.steps.length,b=w.useMemo(()=>{var G;if(!t.individualProduct)return{};const d=s.stepperForm.steps[4],O=(G=d==null?void 0:d.productOptions)==null?void 0:G[t.individualProduct];if(!O)return{};const N={},W=Object.keys(O);return Object.entries(t.options).forEach(([A,q])=>{W.includes(A)&&(N[A]=q)}),N},[t.individualProduct,t.options,s.stepperForm.steps]),v=w.useCallback(async()=>{var d;R.getState().setSubmitting(!0);try{const O={productGroup:t.productGroup,productRange:t.productRange,individualProduct:t.individualProduct,options:b,contactInfo:t.contactInfo};if(console.log("Submitting form data:",O),!(await fetch("/wp-json/urbana/v1/submit-form",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((d=window.urbanaPublic)==null?void 0:d.nonce)||""},body:JSON.stringify({selections:O,submittedAt:new Date().toISOString()})})).ok)throw new Error("Failed to submit form");R.getState().setSubmitted(!0)}catch(O){console.error("Error submitting form:",O),alert("Failed to submit form. Please try again.")}finally{R.getState().setSubmitting(!1)}},[t,b]),m=d=>{l(d)},h=()=>{i()},c=()=>{o()},x=k.useCallback(()=>{var O;const d=s.stepperForm.steps[a-1];switch(a){case 1:return e.jsx(me,{data:{categories:(d==null?void 0:d.categories)||[],productGroups:(d==null?void 0:d.productGroups)||[]},selection:t.productGroup||null,onSelect:N=>r("productGroup",N)});case 2:return e.jsx(fe,{data:{ranges:(d==null?void 0:d.ranges)||{},productRanges:(d==null?void 0:d.productRanges)||[]},productGroup:t.productGroup||"",selection:t.productRange||null,onSelect:N=>r("productRange",N)});case 3:return e.jsx(be,{data:{products:(d==null?void 0:d.products)||{},productsData:(d==null?void 0:d.productsData)||[]},productRange:t.productRange||"",selection:t.individualProduct||null,onSelect:N=>r("individualProduct",N)});case 4:return e.jsx(ye,{data:{productDetails:(d==null?void 0:d.productDetails)||{}},productId:t.individualProduct});case 5:return console.log(d,t.options),e.jsx(Ce,{data:{options:(d==null?void 0:d.options)||{},productOptions:(d==null?void 0:d.productOptions)||{},productDetails:((O=s.stepperForm.steps[3])==null?void 0:O.productDetails)||{},dynamicUpdates:(d==null?void 0:d.dynamicUpdates)||{updateImages:!1,updateFiles:!1}},options:t.options||{},onOptionsChange:N=>r("options",N),selectedProductCode:t.individualProduct||void 0});case 6:return e.jsx(Oe,{data:{fields:(d==null?void 0:d.fields)||[]},contactInfo:t.contactInfo,onContactInfoChange:N=>r("contactInfo",N),isSubmitting:n,isSubmitted:u,onSubmit:v});default:return e.jsx("div",{children:"Unknown step"})}},[a,s.stepperForm.steps,t,r,n,u,v]),y=f(a+1),C=a===p,B={hidden:{opacity:0,x:10},visible:{opacity:1,x:0},exit:{opacity:0,x:-10}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{currentStep:a,totalSteps:p,steps:s.stepperForm.steps,selections:t,onStepClick:m}),e.jsx(S,{className:"shadow-sm",children:e.jsx(P,{className:"p-6",children:e.jsxs(j.div,{initial:"hidden",animate:"visible",exit:"exit",variants:B,transition:{duration:.25},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:s.stepperForm.steps[a-1].title}),x()]},a)})}),e.jsx(de,{currentStep:a,totalSteps:p,onNext:h,onPrevious:c,canProceed:y,isLastStep:C,isSubmitting:n,isSubmitted:u,onSubmit:v})]})};function Re(){const{productData:s,initializeProductData:a}=R(),[t,n]=w.useState(!0),[u,r]=w.useState(null);return w.useEffect(()=>{try{const i=window.urbanaPublic;i!=null&&i.productData?(console.log("Loading product data from database:",i.productData),a(),r(null)):(console.warn("No product data found in window.urbanaPublic, using default data"),R.getState().setProductData($),r("Using default product data - database may be empty"))}catch(i){console.error("Error initializing product data:",i),r("Failed to load product data"),R.getState().setProductData($)}finally{n(!1)}},[a]),t?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(X,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product configuration..."})]})})}):s?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Product Configuration"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Select and customize your product in a few simple steps"})]}),u&&e.jsx(L,{color:"warning",variant:"flat",className:"mb-6",title:"Development Notice",description:u,startContent:e.jsx(g,{icon:"lucide:info",width:20})}),e.jsx(De,{data:s})]})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(L,{color:"danger",variant:"flat",className:"mb-6",title:"Configuration Error",description:"Unable to load product configuration data. Please contact support.",startContent:e.jsx(g,{icon:"lucide:alert-triangle",width:20})})})})})}Z.createRoot(document.getElementById("urbana-stepper-root")).render(e.jsx(k.StrictMode,{children:e.jsxs(ce,{children:[e.jsx(se,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(Re,{})})]})}));
